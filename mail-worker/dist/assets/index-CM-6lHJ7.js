import{b as st,d as ke,_ as ie,a as K,u as fe,c as _,o as r,e as H,f as e,n as k,g as t,r as te,h as q,t as m,i as ue,w as ot,j as Ct,k as Y,l as Ie,m as Et,p as Xe,q as St,s as A,T as Je,v as ye,x as It,y as D,z as h,A as W,E as Qe,B as De,F as de,C as je,D as oe,G as Tt,H as xt,I as Ve,J as Mt,K as Le,L as Fe,M as et,N as a,O as At,P as Nt,Q as tt,R as Vt,S as pe,U as qe,V as Pe,W as G,X as Te,Y as We,Z as xe,$ as O,a0 as R,a1 as it,a2 as Ee,a3 as _e,a4 as ge,a5 as Ce,a6 as He,a7 as zt,a8 as Dt,a9 as jt,aa as Lt,ab as $e,ac as ze}from"./index-CrVLGAV5.js";import{I as E}from"./iconify-DfAVPzXa.js";import{_ as ne}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                  */import{E as Ft}from"./el-popper-CxTMhn_i.js";import{E as at,a as lt,b as rt}from"./el-dropdown-item-PNbSi3m1.js";import{E as Bt}from"./el-scrollbar-C5dRdj6E.js";import{l as Ut}from"./login-DZxwudd7.js";import{c as ct}from"./clipboard-utils-CzPXxZBC.js";import{s as Rt,f as qt}from"./day-BmPDsp6A.js";import{E as Oe}from"./index-Bi5OiBjY.js";import{s as Pt,E as Wt,a as Ht,b as Ot}from"./time-utils-C380N-8R.js";import{E as Yt}from"./el-dialog-Dc-uwvKn.js";/* empty css                       *//* empty css                 */import{E as Kt,a as Zt}from"./el-select-C7rgYuUX.js";import{E as Gt}from"./el-empty-CHUpR478.js";import{a as Xt,b as Jt,c as Qt,d as en}from"./account-CAuW78YI.js";import{i as dt}from"./verify-utils-D6Av2NDy.js";import{E as ut}from"./vnode-DMmxwG2F.js";import{E as Be}from"./index-BqKRmYx7.js";import{E as tn}from"./el-input-tag-RNQXVchK.js";import{l as nn}from"./index-wlxkN86N.js";import{c as sn,f as on,a as an}from"./file-utils-BfzHgCq1.js";import{e as ln}from"./email-DXPwLvDA.js";import{u as rn}from"./email-CmInzGUT.js";import{g as cn}from"./icon-utils-DTcb3PuW.js";import{u as dn,d as nt}from"./db-BaiFTXTG.js";import{d as un}from"./dayjs.min-C76mOJ6D.js";import"./index-xJ5jWlCl.js";import"./index-DXUHX4PR.js";import"./index-B5LOEhaN.js";import"./position-CDfJS5hk.js";import"./throttle-DgkiUC1P.js";import"./event-BB_Ol6Sd.js";const mn=st({header:{type:String,default:""},footer:{type:String,default:""},bodyStyle:{type:ke([String,Object,Array]),default:""},headerClass:String,bodyClass:String,footerClass:String,shadow:{type:String,values:["always","hover","never"],default:"always"}}),fn=K({name:"ElCard"}),pn=K({...fn,props:mn,setup(v){const i=fe("card");return(n,l)=>(r(),_("div",{class:k([t(i).b(),t(i).is(`${n.shadow}-shadow`)])},[n.$slots.header||n.header?(r(),_("div",{key:0,class:k([t(i).e("header"),n.headerClass])},[te(n.$slots,"header",{},()=>[q(m(n.header),1)])],2)):H("v-if",!0),e("div",{class:k([t(i).e("body"),n.bodyClass]),style:ue(n.bodyStyle)},[te(n.$slots,"default")],6),n.$slots.footer||n.footer?(r(),_("div",{key:1,class:k([t(i).e("footer"),n.footerClass])},[te(n.$slots,"footer",{},()=>[q(m(n.footer),1)])],2)):H("v-if",!0)],2))}});var vn=ie(pn,[["__file","card.vue"]]);const hn=ot(vn),gn=K({name:"ElContainer"}),_n=K({...gn,props:{direction:{type:String}},setup(v){const i=v,n=Ct(),l=fe("container"),s=Y(()=>i.direction==="vertical"?!0:i.direction==="horizontal"?!1:n&&n.default?n.default().some(u=>{const $=u.type.name;return $==="ElHeader"||$==="ElFooter"}):!1);return(f,u)=>(r(),_("section",{class:k([t(l).b(),t(l).is("vertical",t(s))])},[te(f.$slots,"default")],2))}});var yn=ie(_n,[["__file","container.vue"]]);const wn=K({name:"ElAside"}),bn=K({...wn,props:{width:{type:String,default:null}},setup(v){const i=v,n=fe("aside"),l=Y(()=>i.width?n.cssVarBlock({width:i.width}):{});return(s,f)=>(r(),_("aside",{class:k(t(n).b()),style:ue(t(l))},[te(s.$slots,"default")],6))}});var mt=ie(bn,[["__file","aside.vue"]]);const $n=K({name:"ElFooter"}),kn=K({...$n,props:{height:{type:String,default:null}},setup(v){const i=v,n=fe("footer"),l=Y(()=>i.height?n.cssVarBlock({height:i.height}):{});return(s,f)=>(r(),_("footer",{class:k(t(n).b()),style:ue(t(l))},[te(s.$slots,"default")],6))}});var ft=ie(kn,[["__file","footer.vue"]]);const Cn=K({name:"ElHeader"}),En=K({...Cn,props:{height:{type:String,default:null}},setup(v){const i=v,n=fe("header"),l=Y(()=>i.height?n.cssVarBlock({height:i.height}):{});return(s,f)=>(r(),_("header",{class:k(t(n).b()),style:ue(t(l))},[te(s.$slots,"default")],6))}});var pt=ie(En,[["__file","header.vue"]]);const Sn=K({name:"ElMain"}),In=K({...Sn,setup(v){const i=fe("main");return(n,l)=>(r(),_("main",{class:k(t(i).b())},[te(n.$slots,"default")],2))}});var vt=ie(In,[["__file","main.vue"]]);const Tn=ot(yn,{Aside:mt,Footer:ft,Header:pt,Main:vt}),xn=Ie(mt);Ie(ft);const Mn=Ie(pt),An=Ie(vt),ht=["primary","success","info","warning","error"],Nn=st({customClass:{type:String,default:""},dangerouslyUseHTMLString:Boolean,duration:{type:Number,default:4500},icon:{type:Xe},id:{type:String,default:""},message:{type:ke([String,Object,Function]),default:""},offset:{type:Number,default:0},onClick:{type:ke(Function),default:()=>{}},onClose:{type:ke(Function),required:!0},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},showClose:{type:Boolean,default:!0},title:{type:String,default:""},type:{type:String,values:[...ht,""],default:""},zIndex:Number,closeIcon:{type:Xe,default:Et}}),Vn={destroy:()=>!0},zn=K({name:"ElNotification"}),Dn=K({...zn,props:Nn,emits:Vn,setup(v,{expose:i}){const n=v,{ns:l,zIndex:s}=St("notification"),{nextZIndex:f,currentZIndex:u}=s,$=A(!1);let g;const c=Y(()=>{const b=n.type;return b&&Je[n.type]?l.m(b):""}),w=Y(()=>n.type&&Je[n.type]||n.icon),M=Y(()=>n.position.endsWith("right")?"right":"left"),j=Y(()=>n.position.startsWith("top")?"top":"bottom"),L=Y(()=>{var b;return{[j.value]:`${n.offset}px`,zIndex:(b=n.zIndex)!=null?b:u.value}});function T(){n.duration>0&&({stop:g}=xt(()=>{$.value&&Z()},n.duration))}function o(){g?.()}function Z(){$.value=!1}function Q({code:b}){b===Ve.delete||b===Ve.backspace?o():b===Ve.esc?$.value&&Z():T()}return ye(()=>{T(),f(),$.value=!0}),It(document,"keydown",Q),i({visible:$,close:Z}),(b,S)=>(r(),D(Tt,{name:t(l).b("fade"),onBeforeLeave:b.onClose,onAfterLeave:C=>b.$emit("destroy"),persisted:""},{default:h(()=>[W(e("div",{id:b.id,class:k([t(l).b(),b.customClass,t(M)]),style:ue(t(L)),role:"alert",onMouseenter:o,onMouseleave:T,onClick:b.onClick},[t(w)?(r(),D(t(Qe),{key:0,class:k([t(l).e("icon"),t(c)])},{default:h(()=>[(r(),D(De(t(w))))]),_:1},8,["class"])):H("v-if",!0),e("div",{class:k(t(l).e("group"))},[e("h2",{class:k(t(l).e("title")),textContent:m(b.title)},null,10,["textContent"]),W(e("div",{class:k(t(l).e("content")),style:ue(b.title?void 0:{margin:0})},[te(b.$slots,"default",{},()=>[b.dangerouslyUseHTMLString?(r(),_(de,{key:1},[H(" Caution here, message could've been compromised, never use user's input as message "),e("p",{innerHTML:b.message},null,8,["innerHTML"])],2112)):(r(),_("p",{key:0},m(b.message),1))])],6),[[je,b.message]]),b.showClose?(r(),D(t(Qe),{key:0,class:k(t(l).e("closeBtn")),onClick:oe(Z,["stop"])},{default:h(()=>[(r(),D(De(b.closeIcon)))]),_:1},8,["class","onClick"])):H("v-if",!0)],2)],46,["id","onClick"]),[[je,$.value]])]),_:3},8,["name","onBeforeLeave","onAfterLeave"]))}});var jn=ie(Dn,[["__file","notification.vue"]]);const Se={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]},Ue=16;let Ln=1;const me=function(v={},i){if(!Mt)return{close:()=>{}};(Le(v)||Fe(v))&&(v={message:v});const n=v.position||"top-right";let l=v.offset||0;Se[n].forEach(({vm:w})=>{var M;l+=(((M=w.el)==null?void 0:M.offsetHeight)||0)+Ue}),l+=Ue;const s=`notification_${Ln++}`,f=v.onClose,u={...v,offset:l,id:s,onClose:()=>{Fn(s,n,f)}};let $=document.body;et(v.appendTo)?$=v.appendTo:Le(v.appendTo)&&($=document.querySelector(v.appendTo)),et($)||($=document.body);const g=document.createElement("div"),c=a(jn,u,At(u.message)?u.message:Fe(u.message)?()=>u.message:null);return c.appContext=Nt(i)?me._context:i,c.props.onDestroy=()=>{tt(null,g)},tt(c,g),Se[n].push({vm:c}),$.appendChild(g.firstElementChild),{close:()=>{c.component.exposed.visible.value=!1}}};ht.forEach(v=>{me[v]=(i={},n)=>((Le(i)||Fe(i))&&(i={message:i}),me({...i,type:v},n))});function Fn(v,i,n){const l=Se[i],s=l.findIndex(({vm:c})=>{var w;return((w=c.component)==null?void 0:w.props.id)===v});if(s===-1)return;const{vm:f}=l[s];if(!f)return;n?.(f);const u=f.el.offsetHeight,$=i.split("-")[0];l.splice(s,1);const g=l.length;if(!(g<1))for(let c=s;c<g;c++){const{el:w,component:M}=l[c].vm,j=Number.parseInt(w.style[$],10)-u-Ue;M.props.offset=j}}function Bn(){for(const v of Object.values(Se))v.forEach(({vm:i})=>{i.component.exposed.visible.value=!1})}me.closeAll=Bn;me._context=null;const Re=Vt(me,"$notify"),Un={class:"premium-sidebar"},Rn={class:"sidebar-content"},qn={class:"brand-section"},Pn={class:"brand-icon"},Wn={class:"brand-text"},Hn={class:"brand-title"},On={class:"navigation-section"},Yn={class:"nav-group"},Kn={class:"nav-group-title"},Zn={class:"nav-items"},Gn={class:"nav-item-icon"},Xn={class:"nav-item-text"},Jn={class:"nav-item-icon"},Qn={class:"nav-item-text"},es={class:"nav-item-icon"},ts={class:"nav-item-text"},ns={class:"nav-item-icon"},ss={class:"nav-item-text"},os={class:"nav-item-icon"},is={class:"nav-item-text"},as={class:"nav-group"},ls={class:"nav-group-title"},rs={class:"nav-items"},cs={class:"nav-item-icon"},ds={class:"nav-item-text"},us={class:"nav-item-icon"},ms={class:"nav-item-text"},fs={class:"nav-item-icon"},ps={class:"nav-item-text"},vs={class:"nav-item-icon"},hs={class:"nav-item-text"},gs={class:"nav-item-icon"},_s={class:"nav-item-text"},ys={class:"nav-item-icon"},ws={class:"nav-item-text"},bs={__name:"index",setup(v){const i=pe(),n=qe();return(l,s)=>{const f=Pe("perm");return r(),_("div",Un,[e("div",Rn,[e("div",qn,[e("div",Pn,[a(t(E),{icon:"fluent:mail-24-filled",width:"28",height:"28"})]),e("div",Wn,[e("h2",Hn,m(t(i).settings.title),1),s[11]||(s[11]=e("p",{class:"brand-subtitle"},"Premium Mail",-1))])]),e("div",On,[e("div",Yn,[e("h3",Kn,m(l.$t("mail")),1),e("div",Zn,[e("div",{class:k(["nav-item",t(n).meta.name==="email"?"nav-item-active":""]),onClick:s[0]||(s[0]=u=>t(G).push({name:"email"}))},[e("div",Gn,[a(t(E),{icon:"hugeicons:mailbox-01",width:"20",height:"20"})]),e("span",Xn,m(l.$t("inbox")),1),s[12]||(s[12]=e("div",{class:"nav-item-indicator"},null,-1))],2),W((r(),_("div",{class:k(["nav-item",t(n).meta.name==="send"?"nav-item-active":""]),onClick:s[1]||(s[1]=u=>t(G).push({name:"send"}))},[e("div",Jn,[a(t(E),{icon:"cil:send",width:"20",height:"20"})]),e("span",Qn,m(l.$t("sent")),1),s[13]||(s[13]=e("div",{class:"nav-item-indicator"},null,-1))],2)),[[f,"email:send"]]),W((r(),_("div",{class:k(["nav-item",t(n).meta.name==="draft"?"nav-item-active":""]),onClick:s[2]||(s[2]=u=>t(G).push({name:"draft"}))},[e("div",es,[a(t(E),{icon:"ep:document",width:"19",height:"19"})]),e("span",ts,m(l.$t("drafts")),1),s[14]||(s[14]=e("div",{class:"nav-item-indicator"},null,-1))],2)),[[f,"email:send"]]),e("div",{class:k(["nav-item",t(n).meta.name==="star"?"nav-item-active":""]),onClick:s[3]||(s[3]=u=>t(G).push({name:"star"}))},[e("div",ns,[a(t(E),{icon:"solar:star-line-duotone",width:"20",height:"20"})]),e("span",ss,m(l.$t("starred")),1),s[15]||(s[15]=e("div",{class:"nav-item-indicator"},null,-1))],2),e("div",{class:k(["nav-item",t(n).meta.name==="setting"?"nav-item-active":""]),onClick:s[4]||(s[4]=u=>t(G).push({name:"setting"}))},[e("div",os,[a(t(E),{icon:"fluent:settings-48-regular",width:"20",height:"20"})]),e("span",is,m(l.$t("settings")),1),s[16]||(s[16]=e("div",{class:"nav-item-indicator"},null,-1))],2)])]),W((r(),_("div",as,[e("h3",ls,m(l.$t("manage")),1),e("div",rs,[W((r(),_("div",{class:k(["nav-item",t(n).meta.name==="analysis"?"nav-item-active":""]),onClick:s[5]||(s[5]=u=>t(G).push({name:"analysis"}))},[e("div",cs,[a(t(E),{icon:"fluent:data-pie-20-regular",width:"20",height:"20"})]),e("span",ds,m(l.$t("analytics")),1),s[17]||(s[17]=e("div",{class:"nav-item-indicator"},null,-1))],2)),[[f,"analysis:query"]]),W((r(),_("div",{class:k(["nav-item",t(n).meta.name==="user"?"nav-item-active":""]),onClick:s[6]||(s[6]=u=>t(G).push({name:"user"}))},[e("div",us,[a(t(E),{icon:"si:user-alt-2-line",width:"20",height:"20"})]),e("span",ms,m(l.$t("allUsers")),1),s[18]||(s[18]=e("div",{class:"nav-item-indicator"},null,-1))],2)),[[f,"user:query"]]),W((r(),_("div",{class:k(["nav-item",t(n).meta.name==="all-email"?"nav-item-active":""]),onClick:s[7]||(s[7]=u=>t(G).push({name:"all-email"}))},[e("div",fs,[a(t(E),{icon:"fluent:mail-list-28-regular",width:"20",height:"20"})]),e("span",ps,m(l.$t("allMail")),1),s[19]||(s[19]=e("div",{class:"nav-item-indicator"},null,-1))],2)),[[f,"all-email:query"]]),W((r(),_("div",{class:k(["nav-item",t(n).meta.name==="role"?"nav-item-active":""]),onClick:s[8]||(s[8]=u=>t(G).push({name:"role"}))},[e("div",vs,[a(t(E),{icon:"fluent:lock-closed-16-regular",width:"20",height:"20"})]),e("span",hs,m(l.$t("permissions")),1),s[20]||(s[20]=e("div",{class:"nav-item-indicator"},null,-1))],2)),[[f,"role:query"]]),W((r(),_("div",{class:k(["nav-item",t(n).meta.name==="reg-key"?"nav-item-active":""]),onClick:s[9]||(s[9]=u=>t(G).push({name:"reg-key"}))},[e("div",gs,[a(t(E),{icon:"fluent:fingerprint-20-filled",width:"20",height:"20"})]),e("span",_s,m(l.$t("inviteCode")),1),s[21]||(s[21]=e("div",{class:"nav-item-indicator"},null,-1))],2)),[[f,"reg-key:query"]]),W((r(),_("div",{class:k(["nav-item",t(n).meta.name==="sys-setting"?"nav-item-active":""]),onClick:s[10]||(s[10]=u=>t(G).push({name:"sys-setting"}))},[e("div",ys,[a(t(E),{icon:"eos-icons:system-ok-outlined",width:"20",height:"20"})]),e("span",ws,m(l.$t("SystemSettings")),1),s[22]||(s[22]=e("div",{class:"nav-item-indicator"},null,-1))],2)),[[f,"setting:query"]])])])),[[f,["all-email:query","user:query","role:query","setting:query","analysis:query","reg-key:query"]]])])])])}}},$s=ne(bs,[["__scopeId","data-v-6188f9ed"]]),ks={__name:"index",props:{isActive:{type:Boolean,default:!1}},setup(v,{emit:i}){const n=i,l=()=>{n("toggleClick")};return(s,f)=>(r(),_("div",{class:k(["premium-hamburger",{"is-active":v.isActive}]),onClick:l},f[0]||(f[0]=[e("div",{class:"hamburger-lines"},[e("span",{class:"line line-1"}),e("span",{class:"line line-2"}),e("span",{class:"line line-3"})],-1)]),2))}},Cs=ne(ks,[["__scopeId","data-v-97cbe61e"]]),Es={class:"header-left"},Ss={class:"hamburger-wrapper"},Is={class:"breadcrumb-section"},Ts={class:"page-title"},xs={class:"page-subtitle"},Ms={class:"compose-icon"},As={class:"header-actions"},Ns={class:"action-item translate"},Vs={class:"user-profile"},zs={class:"user-avatar"},Ds={class:"avatar-text"},js={class:"user-info"},Ls={class:"user-name"},Fs={class:"user-role"},Bs={class:"user-details"},Us={class:"details-header"},Rs={class:"details-avatar"},qs={class:"details-info"},Ps={class:"user-name"},Ws={class:"detail-user-type"},Hs={class:"stats-section"},Os={class:"stat-item"},Ys={class:"stat-label"},Ks={class:"stat-value"},Zs={key:0},Gs={class:"stat-item"},Xs={class:"stat-label"},Js={class:"stat-value"},Qs={key:1},eo={class:"logout-section"},to={__name:"index",setup(v){const{t:i}=Te(),n=qe(),l=pe(),s=We(),f=xe(),u=A(!1),$=Y(()=>s.user.role.accountCount),g=Y(()=>{if(l.settings.send===1)return i("disabled");if(!O("email:send"))return i("unauthorized");if(s.user.role.sendType==="ban")return i("sendBanned");if(!s.user.role.sendCount)return i("unlimited");if(s.user.role.sendType==="day")return i("daily");if(s.user.role.sendType==="count")return i("total")}),c=Y(()=>!O("email:send")||s.user.role.sendType==="ban"||!s.user.role.sendCount||l.settings.send===1?null:s.user.sendCount+"/"+s.user.role.sendCount);async function w(C){try{await ct(C),R({message:i("copySuccessMsg"),type:"success",plain:!0})}catch(y){console.error(`${i("copyFailMsg")}:`,y),R({message:i("copyFailMsg"),type:"error",plain:!0})}}function M(C){Rt(C==="en"?"en":"zh-cn"),l.lang=C}function j(){f.showNotice()}function L(C){const y=!f.dark,I=document.documentElement;if(!document.startViewTransition){T(y,I);return}const z=C.clientX,U=C.clientY,F=Math.max(z,window.innerWidth-z),X=Math.max(U,window.innerHeight-U),ee=Math.hypot(F,X);I.setAttribute("data-theme-to",y?"dark":"light"),I.style.setProperty("--vt-x",`${z}px`),I.style.setProperty("--vt-y",`${U}px`),I.style.setProperty("--vt-end-radius",`${ee+10}px`),document.startViewTransition(()=>{T(y,I)}).finished.finally(()=>{I.removeAttribute("data-theme-to")})}function T(C,y){y.setAttribute("class",C?"dark":""),f.dark=C}function o(){f.writerRef.open()}function Z(){f.asideShow=!f.asideShow}function Q(){u.value=!0,Ut().then(()=>{localStorage.removeItem("token"),G.replace("/login")}).finally(()=>{u.value=!1})}function b(C){return C[0]?.toUpperCase()||""}function S(){const C=n.meta.name;return{email:"Manage your inbox efficiently",send:"Sent messages and delivery status",draft:"Your saved drafts",star:"Important starred messages",setting:"Customize your preferences",analysis:"Email analytics and insights",user:"User management and permissions","all-email":"All system emails overview",role:"Role and permission management","reg-key":"Invitation codes management","sys-setting":"System configuration"}[C]||"Welcome to your dashboard"}return(C,y)=>{const I=lt,z=at,U=rt,F=Ft,X=Oe,ee=Pe("perm");return r(),_("div",{class:k(["premium-header",t(O)("email:send")?"":"not-send"])},[e("div",Es,[e("div",Ss,[a(Cs,{onClick:Z})]),e("div",Is,[e("h1",Ts,m(C.$t(t(n).meta.title)),1),e("div",xs,m(S()),1)])]),W((r(),_("div",{class:"compose-button",onClick:o},[e("div",Ms,[a(t(E),{icon:"material-symbols:edit-outline-sharp",width:"20",height:"20"})]),y[6]||(y[6]=e("span",{class:"compose-text"},"Compose",-1))])),[[ee,"email:send"]]),e("div",As,[a(U,null,{dropdown:h(()=>[a(z,null,{default:h(()=>[a(I,{onClick:y[0]||(y[0]=P=>M("zh"))},{default:h(()=>y[7]||(y[7]=[q("简体中文")])),_:1}),a(I,{onClick:y[1]||(y[1]=P=>M("zhTW"))},{default:h(()=>y[8]||(y[8]=[q("繁體中文")])),_:1}),a(I,{onClick:y[2]||(y[2]=P=>M("en"))},{default:h(()=>y[9]||(y[9]=[q("English")])),_:1})]),_:1})]),default:h(()=>[e("div",Ns,[a(t(E),{icon:"carbon:ibm-watson-language-translator",width:"20",height:"20"})])]),_:1}),t(f).dark?(r(),_("div",{key:0,class:"action-item theme-toggle",onClick:y[3]||(y[3]=P=>L(P))},[a(t(E),{icon:"mingcute:sun-fill",width:"20",height:"20"})])):(r(),_("div",{key:1,class:"action-item theme-toggle",onClick:y[4]||(y[4]=P=>L(P))},[a(t(E),{icon:"solar:moon-linear",width:"20",height:"20"})])),e("div",{class:"action-item notification",onClick:j},[a(t(E),{icon:"streamline-plump:announcement-megaphone",width:"20",height:"20"})]),a(U,{teleported:!1,"popper-class":"user-dropdown"},{dropdown:h(()=>[e("div",Bs,[e("div",Us,[e("div",Rs,m(b(t(s).user.email)),1),e("div",qs,[e("div",Ps,m(t(s).user.name),1),e("div",{class:"detail-email",onClick:y[5]||(y[5]=P=>w(t(s).user.email))},m(t(s).user.email),1),e("div",Ws,[a(F,null,{default:h(()=>[q(m(C.$t(t(s).user.role.name)),1)]),_:1})])])]),e("div",Hs,[e("div",Os,[e("span",Ys,m(C.$t("sendCount")),1),e("div",Ks,[c.value?(r(),_("span",Zs,m(c.value),1)):H("",!0),a(F,null,{default:h(()=>[q(m(g.value),1)]),_:1})])]),e("div",Gs,[e("span",Xs,m(C.$t("accountCount")),1),e("div",Js,[t(l).settings.manyEmail||t(l).settings.addEmail?(r(),D(F,{key:0},{default:h(()=>[q(m(C.$t("disabled")),1)]),_:1})):$.value&&t(O)("account:add")?(r(),_("span",Qs,m(C.$t("totalUserAccount",{msg:$.value})),1)):!$.value&&t(O)("account:add")?(r(),D(F,{key:2},{default:h(()=>[q(m(C.$t("unlimited")),1)]),_:1})):t(O)("account:add")?H("",!0):(r(),D(F,{key:3},{default:h(()=>[q(m(C.$t("unauthorized")),1)]),_:1}))])])]),e("div",eo,[a(X,{type:"primary",loading:u.value,onClick:Q},{default:h(()=>[q(m(C.$t("logOut")),1)]),_:1},8,["loading"])])])]),default:h(()=>[e("div",Vs,[e("div",zs,[e("div",Ds,[e("div",null,m(b(t(s).user.email)),1)])]),e("div",js,[e("div",Ls,m(t(s).user.name),1),e("div",Fs,m(C.$t(t(s).user.role.name)),1)]),a(t(E),{class:"dropdown-icon",icon:"mingcute:down-small-fill",width:"20",height:"20"})])]),_:1})])],2)}}},no=ne(to,[["__scopeId","data-v-d625a7ad"]]),so={class:"account-box"},oo={class:"head-opt"},io={"infinite-scroll-distance":600,"infinite-scroll-immediate":!1},ao={class:"account"},lo={class:"opt"},ro={style:{display:"flex","justify-content":"space-between"}},co={style:{display:"flex","justify-content":"space-between"}},uo={key:2,class:"noLoading"},mo={key:3,class:"empty"},fo={class:"container"},po=["data-sitekey"],vo={key:0,style:{"font-size":"12px",color:"#F56C6C"}},ho={class:"container"},go={__name:"index",setup(v){const{t:i}=Te(),n=We(),l=it(),s=pe(),f=A(!1),u=A(!1),$=s.domainList,g=Ee([]),c=A(!1),w=A(!1),M=A(!1),j=A(!1),L=A(!1),T=A(!1),o=A(null),Z=A({}),Q=A({});let b=null,S=null;const C=A(!1);let y="",I=0;const z=Ee({email:"",suffix:s.domainList[0]});let U=10;const F={accountId:0,size:20},X=A();O("account:query")&&re(),_e(()=>l.changeUserAccountName,()=>{g[0].name=l.changeUserAccountName});const ee=()=>{X.value.toggleMenu()};window.onTurnstileError=p=>{I>=4||(I++,console.warn("人机验加载失败",p),setTimeout(()=>{ge(()=>{S?window.turnstile.reset(S):S=window.turnstile.render(".add-email-turnstile")})},1500))},window.onTurnstileSuccess=p=>{y=p};function P(){if(g.length>20)return U=20;if(g.length===0)return U=1;U=g.length}function se(){let p=o.value;if(p===b.name){L.value=!1;return}if(!p){R({message:i("emptyUserNameMsg"),type:"error",plain:!0});return}T.value=!0,en(b.accountId,p).then(()=>{b.name=p,L.value=!1,b.accountId===n.user.accountId&&(n.user.name=p),R({message:i("saveSuccessMsg"),type:"success",plain:!0})}).finally(()=>{T.value=!1})}function d(p){o.value=p.name,b=p,L.value=!0}function V(p){return!O("email:send")&&!(p.accountId!==n.user.accountId&&O("account:delete"))}function B(p){return l.currentAccountId===p?"item-choose":""}function ae(p){Be.confirm(i("delConfirm",{msg:p.email}),{confirmButtonText:i("confirm"),cancelButtonText:i("cancel"),type:"warning"}).then(()=>{Jt(p.accountId).then(()=>{const N=g.findIndex(he=>he.accountId===p.accountId);g.splice(N,1),g.length<F.size&&re(),R({message:i("delSuccessMsg"),type:"success",plain:!0})})})}function le(){w.value||(w.value=!1,M.value=!1,c.value=!1,F.accountId=0,P(),Q.value.setScrollTop(0),g.splice(0,g.length),re())}function J(p){l.currentAccountId=p.accountId,l.currentAccount=p}function ve(){f.value=!0,setTimeout(()=>{Z.value.focus()},100)}async function we(p){try{await ct(p),R({message:i("copySuccessMsg"),type:"success",plain:!0})}catch(N){console.error(`${i("copyFailMsg")}:`,N),R({message:i("copyFailMsg"),type:"error",plain:!0})}}function re(){if(w.value||M.value||c.value)return;g.length===0?w.value=!0:M.value=!0;let p=Date.now();Xt(F.accountId,F.size).then(async N=>{let be=Date.now()-p;be<500&&await Pt(500-be),N.length<F.size&&(c.value=!0),g.length===0&&(l.currentAccount=N[0].accountId),F.accountId=N.at(-1).accountId,g.push(...N),w.value=!1,M.value=!1}).catch(()=>{w.value=!1,M.value=!1})}function Me(){if(!z.email){R({message:i("emptyEmailMsg"),type:"error",plain:!0});return}if(!dt(z.email+z.suffix)){R({message:i("notEmailMsg"),type:"error",plain:!0});return}if(!y&&(s.settings.addEmailVerify===0||s.settings.addEmailVerify===2&&s.settings.addVerifyOpen)){j.value?C.value||R({message:i("botVerifyMsg"),type:"error",plain:!0}):(j.value=!0,ge(()=>{if(S)window.turnstile.reset(".add-email-turnstile");else try{S=window.turnstile.render(".add-email-turnstile")}catch{C.value=!0,console.log("人机验证js加载失败")}}));return}u.value=!0,Qt(z.email+z.suffix,y).then(p=>{u.value=!1,f.value=!1,z.email="",g.push(p),y="",s.settings.addVerifyOpen=p.addVerifyOpen,R({message:i("addSuccessMsg"),type:"success",plain:!0}),j.value=!1,n.refreshUserInfo()}).catch(p=>{p.code===400&&(y="",S?window.turnstile.reset(S):ge(()=>{S=window.turnstile.render(".add-email-turnstile")}),j.value=!0),u.value=!1})}return(p,N)=>{const he=lt,be=at,gt=rt,Ae=hn,ce=Ht,Ye=Wt,_t=Gt,yt=Bt,wt=Zt,bt=Kt,Ke=ut,Ze=Oe,Ge=Yt,$t=Pe("perm"),kt=Ot;return r(),_("div",so,[e("div",oo,[W(a(t(E),{class:"icon add",icon:"ion:add-outline",width:"23",height:"23",onClick:ve},null,512),[[$t,"account:add"]]),a(t(E),{class:"icon refresh",icon:"ion:reload",width:"18",height:"18",onClick:le})]),a(yt,{class:"scrollbar",ref_key:"scrollbarRef",ref:Q},{default:h(()=>[W((r(),_("div",io,[(r(!0),_(de,null,Ce(g,x=>(r(),D(Ae,{class:k(["item",B(x.accountId)]),key:x.accountId,onClick:Ne=>J(x)},{default:h(()=>[e("div",ao,m(x.email),1),e("div",lo,[e("div",{class:"send-email",onClick:N[0]||(N[0]=oe(()=>{},["stop"]))},[a(t(E),{icon:"eva:email-fill",width:"22",height:"22",color:"#fccb1a"})]),e("div",{class:"settings",onClick:N[1]||(N[1]=oe(()=>{},["stop"]))},[a(t(E),{icon:"fluent-color:clipboard-24",width:"22",height:"22",onClick:oe(Ne=>we(x.email),["stop"])},null,8,["onClick"]),V(x)?(r(),D(t(E),{key:0,icon:"fluent:settings-24-filled",width:"21",height:"21",color:"#909399"})):(r(),D(gt,{key:1},{dropdown:h(()=>[a(be,null,{default:h(()=>[t(O)("email:send")?(r(),D(he,{key:0,onClick:Ne=>d(x)},{default:h(()=>[q(m(p.$t("rename")),1)]),_:2},1032,["onClick"])):H("",!0),x.accountId!==t(n).user.accountId&&t(O)("account:delete")?(r(),D(he,{key:1,onClick:Ne=>ae(x)},{default:h(()=>[q(m(p.$t("delete")),1)]),_:2},1032,["onClick"])):H("",!0)]),_:2},1024)]),default:h(()=>[a(t(E),{icon:"fluent:settings-24-filled",width:"21",height:"21",color:"#909399"})]),_:2},1024))])])]),_:2},1032,["class","onClick"]))),128)),w.value?(r(!0),_(de,{key:0},Ce(t(U),x=>(r(),D(Ye,{key:x,animated:""},{template:h(()=>[a(Ae,{class:"item"},{default:h(()=>[a(ce,{variant:"p",style:{width:"70%",height:"20px","margin-bottom":"25px"}}),e("div",ro,[a(ce,{variant:"text",style:{width:"20px"}}),a(ce,{variant:"text",style:{width:"20px"}})])]),_:1})]),_:2},1024))),128)):H("",!0),g.length>0&&!c.value?(r(),D(Ye,{key:1,animated:""},{template:h(()=>[a(Ae,{class:"item"},{default:h(()=>[a(ce,{variant:"p",style:{width:"70%",height:"20px","margin-bottom":"20px"}}),e("div",co,[a(ce,{variant:"text",style:{width:"20px"}}),a(ce,{variant:"text",style:{width:"20px"}})])]),_:1})]),_:1})):H("",!0),c.value&&g.length>0?(r(),_("div",uo,[e("div",null,m(p.$t("noMoreData")),1)])):H("",!0),c.value&&g.length===0?(r(),_("div",mo,[a(_t,{description:p.$t("noMessagesFound")},null,8,["description"])])):H("",!0)])),[[kt,re]])]),_:1},512),a(Ge,{modelValue:f.value,"onUpdate:modelValue":N[4]||(N[4]=x=>f.value=x),title:p.$t("addAccount")},{default:h(()=>[e("div",fo,[a(Ke,{modelValue:z.email,"onUpdate:modelValue":N[3]||(N[3]=x=>z.email=x),ref_key:"addRef",ref:Z,type:"text",placeholder:p.$t("emailAccount"),autocomplete:"off"},{append:h(()=>[e("div",{onClick:oe(ee,["stop"])},[a(bt,{ref_key:"mySelect",ref:X,modelValue:z.suffix,"onUpdate:modelValue":N[2]||(N[2]=x=>z.suffix=x),placeholder:p.$t("select"),class:"select"},{default:h(()=>[(r(!0),_(de,null,Ce(t($),x=>(r(),D(wt,{key:x,label:x,value:x},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),e("div",null,[e("span",null,m(z.suffix),1),a(t(E),{class:"setting-icon",icon:"mingcute:down-small-fill",width:"20",height:"20"})])])]),_:1},8,["modelValue","placeholder"]),a(Ze,{class:"btn",type:"primary",onClick:Me,loading:u.value},{default:h(()=>[q(m(p.$t("add")),1)]),_:1},8,["loading"])]),e("div",{class:k(["add-email-turnstile",j.value?"turnstile-show":"turnstile-hide"]),"data-sitekey":t(s).settings.siteKey,"data-callback":"onTurnstileSuccess","data-error-callback":"onTurnstileError"},[C.value?(r(),_("span",vo,m(p.$t("verifyModuleFailed")),1)):H("",!0)],10,po)]),_:1},8,["modelValue","title"]),a(Ge,{modelValue:L.value,"onUpdate:modelValue":N[6]||(N[6]=x=>L.value=x),title:p.$t("changeUserName")},{default:h(()=>[e("div",ho,[a(Ke,{modelValue:o.value,"onUpdate:modelValue":N[5]||(N[5]=x=>o.value=x),type:"text",placeholder:p.$t("username"),autocomplete:"off"},null,8,["modelValue","placeholder"]),a(Ze,{class:"btn",type:"primary",onClick:se,loading:T.value},{default:h(()=>[q(m(p.$t("save")),1)]),_:1},8,["loading"])])]),_:1},8,["modelValue","title"])])}}},_o=ne(go,[["__scopeId","data-v-8a0cf873"]]),yo={__name:"index",setup(v){const i=pe(),n=xe(),l=qe();let s=window.innerWidth,f=null;const u=Y(()=>n.accountShow&&i.settings.manyEmail===0);_e(()=>n.changeNotice,()=>{const c=i.settings;let w={notice:c.notice,noticeWidth:c.noticeWidth,noticeTitle:c.noticeTitle,noticeContent:c.noticeContent,noticeType:c.noticeType,noticeDuration:c.noticeDuration,noticePosition:c.noticePosition,noticeOffset:c.noticeOffset};$(w)}),_e(()=>n.changePreview,()=>{$(n.previewData)});function $(c){if(c.notice===1)return;f&&f.close();const w=document.createElement("style");w.innerHTML=`
  .custom-notice.el-notification {
    --el-notification-width: min(${c.noticeWidth}px,calc(100% - 30px)) !important;
  }
  `,document.head.appendChild(w),f=Re({title:c.noticeTitle,message:`<div style="width: 100%;height: 100%;">${c.noticeContent}</div>`,type:c.noticeType==="none"?"":c.noticeType,duration:c.noticeDuration,position:c.noticePosition,offset:c.noticeOffset,dangerouslyUseHTMLString:!0,customClass:"custom-notice"})}ye(()=>{window.addEventListener("resize",g),g()}),He(()=>{window.removeEventListener("resize",g)});const g=()=>{["content","email","send"].includes(l.meta.name)&&s!==window.innerWidth&&(s=window.innerWidth,n.accountShow=window.innerWidth>=767)};return(c,w)=>{const M=zt("router-view");return r(),_("div",{class:k(u.value&&t(O)("account:query")?"main-box-show":"main-box-hide")},[e("div",{class:k(u.value&&t(O)("account:query")?"block-show":"block-hide"),onClick:w[0]||(w[0]=j=>t(n).accountShow=!1)},null,2),a(_o,{class:k(u.value&&t(O)("account:query")?"show":"hide")},null,8,["class"]),a(M,{class:"main-view"},{default:h(({Component:j,route:L})=>[(r(),D(Dt,{include:["email","all-email","send","sys-setting","star","user","role","analysis","reg-key","draft"]},[(r(),D(De(j),{key:L.name}))],1024))]),_:1})],2)}}},wo=ne(yo,[["__scopeId","data-v-6be8b6b6"]]),bo=["id"],$o={__name:"index",props:{defValue:{type:String,default:""},editorId:{type:String,default:()=>`editor-${Date.now()}`}},emits:["change"],setup(v,{expose:i,emit:n}){i({clearEditor:L,focus:Z,getContent:Q});const l=v,{locale:s}=Te(),f=n,u=jt(null),$=A(!1),g=A(null),c=A(!1),w=xe(),M=pe();ye(()=>{T()}),He(()=>{b()}),_e(()=>l.defValue,S=>{u.value&&u.value.getContent()!==S&&u.value.setContent(S)}),_e(()=>[w.dark,M.lang],()=>{b(),o()});const j=Y(()=>s.value==="zh"?"zh_CN":s.value==="zhTW"?"zh_TW":"en");function L(){u.value&&u.value.setContent("")}function T(){if(window.tinymce)o();else{c.value=!0;const S=document.createElement("script");S.src="/tinymce/tinymce.min.js",S.onload=()=>o(),document.head.appendChild(S),c.value=!1}}function o(){window.tinymce.init({selector:`#${l.editorId}`,statusbar:!1,height:"100%",auto_focus:!0,forced_root_block:"div",skin:`${w.dark?"oxide-dark":"oxide"}`,content_css:`/tinymce/css/index.css,${w.dark?"dark":"default"}`,content_style:`:root {
         --scrollbar-track-color: ${w.dark?"#141414":"#FFFFFF"};
         --scrollbar-thumb-color: ${w.dark?"#8D9095":"#A8ABB2"};
    }`,plugins:"link image advlist lists  emoticons fullscreen  table preview code",toolbar:"bold emoticons forecolor backcolor italic fontsize | alignleft aligncenter alignright alignjustify | outdent indent |  bullist numlist | link image  | table code preview fullscreen",toolbar_mode:"scrolling",mobile:{toolbar:"fullscreen bold emoticons forecolor backcolor italic fontsize | alignleft aligncenter alignright alignjustify | outdent indent |  bullist numlist | link image  | table code preview "},font_size_formats:"8px 10px 12px 14px 16px 18px 24px 36px",emoticons_search:!1,language:j.value,language_load:!0,menubar:!1,license_key:"gpl",noneditable_class:"mceNonEditable",setup:S=>{u.value=S,S.on("init",()=>{S.setContent(l.defValue),$.value=!0}),S.on("input change",()=>{const C=S.getContent(),y=S.getContent({format:"text"});f("change",C,y)})},autofocus:!0,branding:!1,file_picker_types:"image",image_dimensions:!1,image_description:!1,link_title:!1,dialog_type:"none",file_picker_callback:(S,C,y)=>{const I=document.createElement("input");I.setAttribute("type","file"),I.setAttribute("accept","image/*"),I.addEventListener("change",async z=>{let U=z.target.files[0];U=await sn(U);const F=new FileReader;F.onload=()=>{const X="blobid"+new Date().getTime(),ee=tinymce.activeEditor.editorUpload.blobCache,P=F.result.split(",")[1],se=ee.create(X,U,P);ee.add(se),S(se.blobUri(),{title:U.name})},F.readAsDataURL(U)}),I.click()}})}function Z(){ge(()=>{u.value.focus()})}function Q(){return u.value.getContent()}function b(){u.value&&(u.value.destroy(),u.value=null)}return(S,C)=>(r(),_("div",{class:k(["editor-box",c.value?"editor-box-loading":""])},[c.value?(r(),D(nn,{key:0,class:"loading"})):(r(),_("textarea",{key:1,style:{outline:"none"},id:v.editorId,ref_key:"editorRef",ref:g},null,8,bo))],2))}},ko=ne($o,[["__scopeId","data-v-33324f14"]]),Co={class:"percent"},Eo={style:{"margin-left":"5px"}},So={__name:"index",props:{value:[Number,String],desc:[String]},setup(v){return(i,n)=>(r(),_("div",Co,[a(t(E),{icon:"line-md:loading-loop",width:"18",height:"18"}),e("div",null,[e("span",null,m(v.value)+"%",1),e("span",Eo,m(v.desc),1)])]))}},Io=ne(So,[["__scopeId","data-v-63e3a566"]]),To={class:"send"},xo={class:"title"},Mo={class:"title-left"},Ao={class:"title-text"},No={class:"sender"},Vo={class:"sender-name"},zo={class:"send-email"},Do={class:"container"},jo={class:"item-title"},Lo={class:"item-title"},Fo={class:"button-item"},Bo={class:"att-list"},Uo={class:"att-filename"},Ro={class:"att-size"},qo={__name:"index",setup(v,{expose:i}){i({open:X,openReply:U,openDraft:ee});const{t:n}=Te(),l=dn(),s=pe(),f=rn(),u=it(),$=A({}),g=We(),c=A(!1),w=A(0);let M=null,j=!1;const L=A(""),T=Ee({receiveEmail:[],subject:"",content:"",sendType:""}),o=Ee({sendEmail:"",receiveEmail:[],accountId:-1,manyType:null,name:"",subject:"",content:"",sendType:"",text:"",emailId:0,attachments:[],draftId:null});function Z(d){const V=Array.from(new Set(d.split(/[,，]/).map(B=>B.trim()).filter(B=>B)));o.receiveEmail.splice(o.receiveEmail.length-1,1),V.forEach(B=>{dt(B)&&!o.receiveEmail.includes(B)&&o.receiveEmail.push(B)})}function Q(){o.manyType=o.manyType?null:"divide"}function b(){Be.confirm(n("clearContentConfirm"),{confirmButtonText:n("confirm"),cancelButtonText:n("cancel"),type:"warning"}).then(()=>{I()})}function S(d){o.attachments.splice(d,1)}function C(){const d=document.createElement("input");d.setAttribute("type","file"),d.click(),d.onchange=async V=>{const B=V.target.files[0],ae=B.size,le=B.name,J=B.type;if(o.attachments.reduce((re,Me)=>re+Me.size,0)+ae>29360128){R({message:n("attLimitMsg"),type:"error",plain:!0});return}const we=await on(B);o.attachments.push({content:we,filename:le,size:ae,contentType:J})}}async function y(){if(o.receiveEmail.length===0){R({message:n("emptyRecipientMsg"),type:"error",plain:!0});return}if(!o.subject){R({message:n("emptySubjectMsg"),type:"error",plain:!0});return}if(!o.content){R({message:n("emptyContentMsg"),type:"error",plain:!0});return}if(o.manyType==="divide"&&o.attachments.length>0){R({message:n("noSeparateSendMsg"),type:"error",plain:!0});return}if(j){R({message:n("sendingErrorMsg"),type:"error",plain:!0});return}M=R({message:()=>ze(Io,{value:w.value,desc:n("sending")}),dangerouslyUseHTMLString:!0,plain:!0,duration:0,customClass:"message-bottom"}),j=!0,c.value=!1,ln(o,d=>{w.value=Math.round(d.loaded*98/d.total)}).then(d=>{const V=d[0];d.forEach(B=>{f.sendScroll?.addItem(B)}),Re({title:n("sendSuccessMsg"),type:"success",message:ze("span",{style:"color: teal"},V.subject),position:"bottom-right"}),g.refreshUserInfo(),o.draftId&&(o.subject="",o.content="",o.receiveEmail=[],l.setDraft={...$e(o)}),I(),c.value=!1}).catch(d=>{Re({title:n("sendFailMsg"),type:d.code===403?"warning":"error",message:ze("span",{style:"color: teal"},d.message),position:"bottom-right"}),c.value=!0}).finally(()=>{M.close(),w.value=0,j=!1})}function I(){o.receiveEmail=[],o.subject="",o.content="",o.manyType=null,o.attachments=[],o.sendType="",o.emailId=0,o.draftId=null,T.content="",T.subject="",T.receiveEmail=[],T.sendType="",$.value.clearEditor()}function z(d,V){o.content=d,o.text=V}function U(d){I(),d.subject=d.subject||"",o.receiveEmail.push(d.sendEmail),o.subject=d.subject.startsWith("Re:")||d.subject.startsWith("回复：")?d.subject:"Re: "+d.subject,o.sendType="reply",o.emailId=d.emailId,L.value="",setTimeout(()=>{L.value=`
    <div></div>
    <div>
    <br>
        ${qt(d.createTime)} ${d.name} &lt${d.sendEmail}&gt ${n("wrote")}:
    </div>
    <blockquote class="mceNonEditable" style="margin: 0 0 0 0.8ex;border-left: 1px solid rgb(204,204,204);padding-left: 1ex;">
      <articl>
          ${F(d.content)||`<pre style="font-family: inherit;word-break: break-word;white-space: pre-wrap;margin: 0">${d.text}</pre>`}
      </article>
    </blockquote>`,X(),ge(()=>{T.content=$.value.getContent(),T.subject=o.subject,T.receiveEmail=o.receiveEmail,T.sendType=o.sendType})})}function F(d){d=d||"";const V=s.settings.r2Domain;return d.replace(/{{domain}}/g,V+"/")}function X(){u.currentAccount.email?(o.sendEmail=u.currentAccount.email,o.accountId=u.currentAccount.accountId,o.name=u.currentAccount.name):(o.sendEmail=g.user.email,o.accountId=g.user.accountId,o.name=g.user.name),c.value=!0,$.value.focus()}function ee(d){Object.assign(o,{...d}),L.value="",setTimeout(()=>L.value=o.content),c.value=!0,$.value.focus()}const P=d=>{d.key==="Escape"&&se()};ye(()=>{window.addEventListener("keydown",P)}),Lt(()=>{window.removeEventListener("keydown",P)});function se(){if(o.draftId){l.setDraft={...$e(o)},c.value=!1,I();return}if(!(o.content||o.subject||o.receiveEmail.length>0)){c.value=!1,I();return}if(T.sendType==="reply"){let d=o.subject===T.subject,V=$.value.getContent()===T.content,B=o.receiveEmail.length===1&&o.receiveEmail[0]===T.receiveEmail[0];if(d&&V&&B){I(),se();return}}Be.confirm(n("saveDraftConfirm"),{confirmButtonText:n("confirm"),cancelButtonText:n("cancel"),type:"warning",distinguishCancelAndClose:!0}).then(async()=>{const d={...$e(o)};delete d.draftId,delete d.attachments,d.createTime=un().utc().format("YYYY-MM-DD HH:mm:ss");const V=await nt.value.draft.add({...d});nt.value.att.add({draftId:V,attachments:$e(o.attachments)}),l.refreshList++,c.value=!1,I()}).catch(d=>{d==="cancel"&&(c.value=!1,I())})}return(d,V)=>{const B=tn,ae=ut,le=Oe;return W((r(),_("div",To,[e("div",{class:"write-box",onClick:V[2]||(V[2]=oe(()=>{},["stop"]))},[e("div",xo,[e("div",Mo,[e("span",Ao,[a(t(E),{icon:"hugeicons:quill-write-01",width:"28",height:"28"})]),e("span",No,m(d.$t("sender"))+":",1),e("span",Vo,m(o.name),1),e("span",zo,"<"+m(o.sendEmail)+">",1)]),e("div",{onClick:se,style:{cursor:"pointer"}},[a(t(E),{icon:"material-symbols-light:close-rounded",width:"22",height:"22"})])]),e("div",Do,[a(B,{onAddTag:Z,"tag-type":"primary",size:"default",modelValue:o.receiveEmail,"onUpdate:modelValue":V[0]||(V[0]=J=>o.receiveEmail=J),placeholder:d.$t("ruleEmailsInputDesc")},{prefix:h(()=>[e("div",jo,m(d.$t("recipient")),1)]),suffix:h(()=>[e("span",{class:k(["distribute",o.manyType?"checked":""]),onClick:oe(Q,["stop"])},m(d.$t("sendSeparately")),3)]),_:1},8,["modelValue","placeholder"]),a(ae,{modelValue:o.subject,"onUpdate:modelValue":V[1]||(V[1]=J=>o.subject=J),placeholder:d.$t("subjectInputDesc")},{prefix:h(()=>[e("div",Lo,m(d.$t("subject")),1)]),_:1},8,["modelValue","placeholder"]),a(ko,{"def-value":L.value,ref_key:"editor",ref:$,onChange:z},null,8,["def-value"]),e("div",Fo,[e("div",{class:"att-add",onClick:C},[a(t(E),{icon:"iconamoon:attachment-fill",width:"24",height:"24"})]),e("div",{class:"att-clear",onClick:b},[a(t(E),{icon:"icon-park-outline:clear-format",width:"24",height:"24 "})]),e("div",Bo,[(r(!0),_(de,null,Ce(o.attachments,(J,ve)=>(r(),_("div",{class:"att-item",key:ve},[a(t(E),{icon:t(cn)(J.filename),width:"20",height:"20"},null,8,["icon"]),e("span",Uo,m(J.filename),1),e("span",Ro,m(t(an)(J.size)),1),a(t(E),{style:{cursor:"pointer"},icon:"material-symbols-light:close-rounded",onClick:we=>S(ve),width:"22",height:"22"},null,8,["onClick"])]))),128))]),e("div",null,[o.sendType==="reply"?(r(),D(le,{key:0,type:"primary",onClick:y},{default:h(()=>[q(m(d.$t("reply")),1)]),_:1})):(r(),D(le,{key:1,type:"primary",onClick:y},{default:h(()=>[q(m(d.$t("send")),1)]),_:1}))])])])])],512)),[[je,c.value]])}}},Po=ne(qo,[["__scopeId","data-v-c4335238"]]),Wo={__name:"index",setup(v){const i=xe(),n=A({}),l=A(window.innerWidth<1025),s=()=>{l.value=window.innerWidth<1025,i.asideShow=window.innerWidth>1024};return ye(()=>{i.writerRef=n,window.addEventListener("resize",s),s()}),He(()=>{window.removeEventListener("resize",s)}),(f,u)=>{const $=xn,g=Mn,c=An,w=Tn;return r(),_(de,null,[a(w,{class:"layout"},{default:h(()=>[a($,{class:k(["aside",t(i).asideShow?"aside-show":"el-aside-hide"])},{default:h(()=>[a($s)]),_:1},8,["class"]),e("div",{class:k(t(i).asideShow&&l.value?"overlay-show":"overlay-hide"),onClick:u[0]||(u[0]=M=>t(i).asideShow=!1)},null,2),a(w,{class:"main-container"},{default:h(()=>[a(c,null,{default:h(()=>[a(g,null,{default:h(()=>[a(no)]),_:1}),a(wo)]),_:1})]),_:1})]),_:1}),a(Po,{ref_key:"writerRef",ref:n},null,512)],64)}}},Si=ne(Wo,[["__scopeId","data-v-c895b75f"]]);export{Si as default};
