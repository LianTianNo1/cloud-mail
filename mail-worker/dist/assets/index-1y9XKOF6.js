import{b as ie,p as ze,_ as pe,a as R,as as re,k as A,c as P,o as s,y as g,t as i,z as p,B as Oe,g as l,E as Je,at as Nt,au as Ge,av as Xe,d as Qe,u as ce,s as f,a3 as oe,N as h,F as be,a5 as he,n as L,aw as It,f as b,ax as Mt,e as T,ay as Vt,az as We,aA as Bt,aB as At,aC as Q,aD as xt,aE as Dt,aF as Ut,ac as U,aG as Lt,aH as Rt,aI as Ft,w as Yt,ak as ee,X as qt,Y as Wt,S as jt,a2 as ve,i as je,h as w,D as Ht,a0 as D}from"./index-CrVLGAV5.js";import{E as Kt}from"./el-dialog-Dc-uwvKn.js";/* empty css                       */import{E as Ot}from"./el-scrollbar-C5dRdj6E.js";import{i as Jt,E as Gt}from"./el-popper-CxTMhn_i.js";import{a as Ze,E as et}from"./el-select-C7rgYuUX.js";/* empty css                 */import{E as Xt,a as Qt}from"./el-table-column-C1-20CeS.js";import"./el-checkbox-1PyqgUYo.js";/* empty css                  */import{b as Zt,E as ea,a as ta}from"./el-dropdown-item-PNbSi3m1.js";import{u as aa,r as Ne}from"./role-qIGTCH-R.js";import{I as se}from"./iconify-DfAVPzXa.js";import{l as na}from"./index-wlxkN86N.js";import{t as Ie}from"./day-BmPDsp6A.js";import{i as la}from"./verify-utils-D6Av2NDy.js";import{E as sa,a as He}from"./el-radio-group-D3BgMgF3.js";/* empty css                 */import{_ as oa}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{E as tt}from"./vnode-DMmxwG2F.js";import{E as ia}from"./index-Bi5OiBjY.js";import{C as Pe}from"./event-BB_Ol6Sd.js";import{u as ra}from"./index-B5LOEhaN.js";import{d as ua}from"./index-xJ5jWlCl.js";import{E as ke}from"./index-BqKRmYx7.js";import"./index-DXUHX4PR.js";import"./dayjs.min-C76mOJ6D.js";const at=Symbol("elPaginationKey"),da=ie({disabled:Boolean,currentPage:{type:Number,default:1},prevText:{type:String},prevIcon:{type:ze}}),ca={click:t=>t instanceof MouseEvent},pa=R({name:"ElPaginationPrev"}),ma=R({...pa,props:da,emits:ca,setup(t){const n=t,{t:d}=re(),_=A(()=>n.disabled||n.currentPage<=1);return(y,k)=>(s(),P("button",{type:"button",class:"btn-prev",disabled:l(_),"aria-label":y.prevText||l(d)("el.pagination.prev"),"aria-disabled":l(_),onClick:$=>y.$emit("click",$)},[y.prevText?(s(),P("span",{key:0},i(y.prevText),1)):(s(),g(l(Je),{key:1},{default:p(()=>[(s(),g(Oe(y.prevIcon)))]),_:1}))],8,["disabled","aria-label","aria-disabled","onClick"]))}});var fa=pe(ma,[["__file","prev.vue"]]);const ga=ie({disabled:Boolean,currentPage:{type:Number,default:1},pageCount:{type:Number,default:50},nextText:{type:String},nextIcon:{type:ze}}),va=R({name:"ElPaginationNext"}),ba=R({...va,props:ga,emits:["click"],setup(t){const n=t,{t:d}=re(),_=A(()=>n.disabled||n.currentPage===n.pageCount||n.pageCount===0);return(y,k)=>(s(),P("button",{type:"button",class:"btn-next",disabled:l(_),"aria-label":y.nextText||l(d)("el.pagination.next"),"aria-disabled":l(_),onClick:$=>y.$emit("click",$)},[y.nextText?(s(),P("span",{key:0},i(y.nextText),1)):(s(),g(l(Je),{key:1},{default:p(()=>[(s(),g(Oe(y.nextIcon)))]),_:1}))],8,["disabled","aria-label","aria-disabled","onClick"]))}});var ha=pe(ba,[["__file","next.vue"]]);const Me=()=>Nt(at,{}),ya=ie({pageSize:{type:Number,required:!0},pageSizes:{type:Qe(Array),default:()=>Xe([10,20,30,40,50,100])},popperClass:{type:String},disabled:Boolean,teleported:Boolean,size:{type:String,values:Ge},appendSizeTo:String}),Ca=R({name:"ElPaginationSizes"}),wa=R({...Ca,props:ya,emits:["page-size-change"],setup(t,{emit:n}){const d=t,{t:_}=re(),y=ce("pagination"),k=Me(),$=f(d.pageSize);oe(()=>d.pageSizes,(C,V)=>{if(!Jt(C,V)&&It(C)){const S=C.includes(d.pageSize)?d.pageSize:d.pageSizes[0];n("page-size-change",S)}}),oe(()=>d.pageSize,C=>{$.value=C});const M=A(()=>d.pageSizes);function F(C){var V;C!==$.value&&($.value=C,(V=k.handleSizeChange)==null||V.call(k,Number(C)))}return(C,V)=>(s(),P("span",{class:L(l(y).e("sizes"))},[h(l(et),{"model-value":$.value,disabled:C.disabled,"popper-class":C.popperClass,size:C.size,teleported:C.teleported,"validate-event":!1,"append-to":C.appendSizeTo,onChange:F},{default:p(()=>[(s(!0),P(be,null,he(l(M),S=>(s(),g(l(Ze),{key:S,value:S,label:S+l(_)("el.pagination.pagesize")},null,8,["value","label"]))),128))]),_:1},8,["model-value","disabled","popper-class","size","teleported","append-to"])],2))}});var Sa=pe(wa,[["__file","sizes.vue"]]);const _a=ie({size:{type:String,values:Ge}}),ka=R({name:"ElPaginationJumper"}),Pa=R({...ka,props:_a,setup(t){const{t:n}=re(),d=ce("pagination"),{pageCount:_,disabled:y,currentPage:k,changeEvent:$}=Me(),M=f(),F=A(()=>{var S;return(S=M.value)!=null?S:k?.value});function C(S){M.value=S?+S:""}function V(S){S=Math.trunc(+S),$?.(S),M.value=void 0}return(S,O)=>(s(),P("span",{class:L(l(d).e("jump")),disabled:l(y)},[b("span",{class:L([l(d).e("goto")])},i(l(n)("el.pagination.goto")),3),h(l(tt),{size:S.size,class:L([l(d).e("editor"),l(d).is("in-pagination")]),min:1,max:l(_),disabled:l(y),"model-value":l(F),"validate-event":!1,"aria-label":l(n)("el.pagination.page"),type:"number","onUpdate:modelValue":C,onChange:V},null,8,["size","class","max","disabled","model-value","aria-label"]),b("span",{class:L([l(d).e("classifier")])},i(l(n)("el.pagination.pageClassifier")),3)],10,["disabled"]))}});var za=pe(Pa,[["__file","jumper.vue"]]);const $a=ie({total:{type:Number,default:1e3}}),Ea=R({name:"ElPaginationTotal"}),Ta=R({...Ea,props:$a,setup(t){const{t:n}=re(),d=ce("pagination"),{disabled:_}=Me();return(y,k)=>(s(),P("span",{class:L(l(d).e("total")),disabled:l(_)},i(l(n)("el.pagination.total",{total:y.total})),11,["disabled"]))}});var Na=pe(Ta,[["__file","total.vue"]]);const Ia=ie({currentPage:{type:Number,default:1},pageCount:{type:Number,required:!0},pagerCount:{type:Number,default:7},disabled:Boolean}),Ma=R({name:"ElPaginationPager"}),Va=R({...Ma,props:Ia,emits:[Pe],setup(t,{emit:n}){const d=t,_=ce("pager"),y=ce("icon"),{t:k}=re(),$=f(!1),M=f(!1),F=f(!1),C=f(!1),V=f(!1),S=f(!1),O=A(()=>{const u=d.pagerCount,o=(u-1)/2,r=Number(d.currentPage),E=Number(d.pageCount);let N=!1,Y=!1;E>u&&(r>u-o&&(N=!0),r<E-o&&(Y=!0));const H=[];if(N&&!Y){const v=E-(u-2);for(let m=v;m<E;m++)H.push(m)}else if(!N&&Y)for(let v=2;v<u;v++)H.push(v);else if(N&&Y){const v=Math.floor(u/2)-1;for(let m=r-v;m<=r+v;m++)H.push(m)}else for(let v=2;v<E;v++)H.push(v);return H}),j=A(()=>["more","btn-quickprev",y.b(),_.is("disabled",d.disabled)]),x=A(()=>["more","btn-quicknext",y.b(),_.is("disabled",d.disabled)]),z=A(()=>d.disabled?-1:0);Mt(()=>{const u=(d.pagerCount-1)/2;$.value=!1,M.value=!1,d.pageCount>d.pagerCount&&(d.currentPage>d.pagerCount-u&&($.value=!0),d.currentPage<d.pageCount-u&&(M.value=!0))});function J(u=!1){d.disabled||(u?F.value=!0:C.value=!0)}function te(u=!1){u?V.value=!0:S.value=!0}function ue(u){const o=u.target;if(o.tagName.toLowerCase()==="li"&&Array.from(o.classList).includes("number")){const r=Number(o.textContent);r!==d.currentPage&&n(Pe,r)}else o.tagName.toLowerCase()==="li"&&Array.from(o.classList).includes("more")&&ae(u)}function ae(u){const o=u.target;if(o.tagName.toLowerCase()==="ul"||d.disabled)return;let r=Number(o.textContent);const E=d.pageCount,N=d.currentPage,Y=d.pagerCount-2;o.className.includes("more")&&(o.className.includes("quickprev")?r=N-Y:o.className.includes("quicknext")&&(r=N+Y)),Number.isNaN(+r)||(r<1&&(r=1),r>E&&(r=E)),r!==N&&n(Pe,r)}return(u,o)=>(s(),P("ul",{class:L(l(_).b()),onClick:ae,onKeyup:At(ue,["enter"])},[u.pageCount>0?(s(),P("li",{key:0,class:L([[l(_).is("active",u.currentPage===1),l(_).is("disabled",u.disabled)],"number"]),"aria-current":u.currentPage===1,"aria-label":l(k)("el.pagination.currentPage",{pager:1}),tabindex:l(z)}," 1 ",10,["aria-current","aria-label","tabindex"])):T("v-if",!0),$.value?(s(),P("li",{key:1,class:L(l(j)),tabindex:l(z),"aria-label":l(k)("el.pagination.prevPages",{pager:u.pagerCount-2}),onMouseenter:r=>J(!0),onMouseleave:r=>F.value=!1,onFocus:r=>te(!0),onBlur:r=>V.value=!1},[(F.value||V.value)&&!u.disabled?(s(),g(l(Vt),{key:0})):(s(),g(l(We),{key:1}))],42,["tabindex","aria-label","onMouseenter","onMouseleave","onFocus","onBlur"])):T("v-if",!0),(s(!0),P(be,null,he(l(O),r=>(s(),P("li",{key:r,class:L([[l(_).is("active",u.currentPage===r),l(_).is("disabled",u.disabled)],"number"]),"aria-current":u.currentPage===r,"aria-label":l(k)("el.pagination.currentPage",{pager:r}),tabindex:l(z)},i(r),11,["aria-current","aria-label","tabindex"]))),128)),M.value?(s(),P("li",{key:2,class:L(l(x)),tabindex:l(z),"aria-label":l(k)("el.pagination.nextPages",{pager:u.pagerCount-2}),onMouseenter:r=>J(),onMouseleave:r=>C.value=!1,onFocus:r=>te(),onBlur:r=>S.value=!1},[(C.value||S.value)&&!u.disabled?(s(),g(l(Bt),{key:0})):(s(),g(l(We),{key:1}))],42,["tabindex","aria-label","onMouseenter","onMouseleave","onFocus","onBlur"])):T("v-if",!0),u.pageCount>1?(s(),P("li",{key:3,class:L([[l(_).is("active",u.currentPage===u.pageCount),l(_).is("disabled",u.disabled)],"number"]),"aria-current":u.currentPage===u.pageCount,"aria-label":l(k)("el.pagination.currentPage",{pager:u.pageCount}),tabindex:l(z)},i(u.pageCount),11,["aria-current","aria-label","tabindex"])):T("v-if",!0)],42,["onKeyup"]))}});var Ba=pe(Va,[["__file","pager.vue"]]);const B=t=>typeof t!="number",Aa=ie({pageSize:Number,defaultPageSize:Number,total:Number,pageCount:Number,pagerCount:{type:Number,validator:t=>Q(t)&&Math.trunc(t)===t&&t>4&&t<22&&t%2===1,default:7},currentPage:Number,defaultCurrentPage:Number,layout:{type:String,default:["prev","pager","next","jumper","->","total"].join(", ")},pageSizes:{type:Qe(Array),default:()=>Xe([10,20,30,40,50,100])},popperClass:{type:String,default:""},prevText:{type:String,default:""},prevIcon:{type:ze,default:()=>Ft},nextText:{type:String,default:""},nextIcon:{type:ze,default:()=>Rt},teleported:{type:Boolean,default:!0},small:Boolean,size:Lt,background:Boolean,disabled:Boolean,hideOnSinglePage:Boolean,appendSizeTo:String}),xa={"update:current-page":t=>Q(t),"update:page-size":t=>Q(t),"size-change":t=>Q(t),change:(t,n)=>Q(t)&&Q(n),"current-change":t=>Q(t),"prev-click":t=>Q(t),"next-click":t=>Q(t)},Ke="ElPagination";var Da=R({name:Ke,props:Aa,emits:xa,setup(t,{emit:n,slots:d}){const{t:_}=re(),y=ce("pagination"),k=xt().vnode.props||{},$=Dt(),M=A(()=>{var o;return t.small?"small":(o=t.size)!=null?o:$.value});ra({from:"small",replacement:"size",version:"3.0.0",scope:"el-pagination",ref:"https://element-plus.org/zh-CN/component/pagination.html"},A(()=>!!t.small));const F="onUpdate:currentPage"in k||"onUpdate:current-page"in k||"onCurrentChange"in k,C="onUpdate:pageSize"in k||"onUpdate:page-size"in k||"onSizeChange"in k,V=A(()=>{if(B(t.total)&&B(t.pageCount)||!B(t.currentPage)&&!F)return!1;if(t.layout.includes("sizes")){if(B(t.pageCount)){if(!B(t.total)&&!B(t.pageSize)&&!C)return!1}else if(!C)return!1}return!0}),S=f(B(t.defaultPageSize)?10:t.defaultPageSize),O=f(B(t.defaultCurrentPage)?1:t.defaultCurrentPage),j=A({get(){return B(t.pageSize)?S.value:t.pageSize},set(o){B(t.pageSize)&&(S.value=o),C&&(n("update:page-size",o),n("size-change",o))}}),x=A(()=>{let o=0;return B(t.pageCount)?B(t.total)||(o=Math.max(1,Math.ceil(t.total/j.value))):o=t.pageCount,o}),z=A({get(){return B(t.currentPage)?O.value:t.currentPage},set(o){let r=o;o<1?r=1:o>x.value&&(r=x.value),B(t.currentPage)&&(O.value=r),F&&(n("update:current-page",r),n("current-change",r))}});oe(x,o=>{z.value>o&&(z.value=o)}),oe([z,j],o=>{n(Pe,...o)},{flush:"post"});function J(o){z.value=o}function te(o){j.value=o;const r=x.value;z.value>r&&(z.value=r)}function ue(){t.disabled||(z.value-=1,n("prev-click",z.value))}function ae(){t.disabled||(z.value+=1,n("next-click",z.value))}function u(o,r){o&&(o.props||(o.props={}),o.props.class=[o.props.class,r].join(" "))}return Ut(at,{pageCount:x,disabled:A(()=>t.disabled),currentPage:z,changeEvent:J,handleSizeChange:te}),()=>{var o,r;if(!V.value)return ua(Ke,_("el.pagination.deprecationWarning")),null;if(!t.layout||t.hideOnSinglePage&&x.value<=1)return null;const E=[],N=[],Y=U("div",{class:y.e("rightwrapper")},N),H={prev:U(fa,{disabled:t.disabled,currentPage:z.value,prevText:t.prevText,prevIcon:t.prevIcon,onClick:ue}),jumper:U(za,{size:M.value}),pager:U(Ba,{currentPage:z.value,pageCount:x.value,pagerCount:t.pagerCount,onChange:J,disabled:t.disabled}),next:U(ha,{disabled:t.disabled,currentPage:z.value,pageCount:x.value,nextText:t.nextText,nextIcon:t.nextIcon,onClick:ae}),sizes:U(Sa,{pageSize:j.value,pageSizes:t.pageSizes,popperClass:t.popperClass,disabled:t.disabled,teleported:t.teleported,size:M.value,appendSizeTo:t.appendSizeTo}),slot:(r=(o=d?.default)==null?void 0:o.call(d))!=null?r:null,total:U(Na,{total:B(t.total)?0:t.total})},v=t.layout.split(",").map(Z=>Z.trim());let m=!1;return v.forEach(Z=>{if(Z==="->"){m=!0;return}m?N.push(H[Z]):E.push(H[Z])}),u(E[0],y.is("first")),u(E[E.length-1],y.is("last")),m&&N.length>0&&(u(N[0],y.is("first")),u(N[N.length-1],y.is("last")),E.push(Y)),U("div",{class:[y.b(),y.is("background",t.background),y.m(M.value)]},E)}}});const Ua=Yt(Da);function La(t){return ee.get("/user/list",{params:{...t}})}function Ra(t){return ee.put("/user/setPwd",t)}function Fa(t){return ee.put("/user/setStatus",t)}function Ya(t){return ee.put("/user/setType",t)}function qa(t){return ee.delete("/user/delete",{params:{userId:t}})}function Wa(t){return ee.post("/user/add",t)}function ja(t){return ee.put("/user/resetSendCount",{userId:t})}function Ha(t,n){return ee.put("/user/restore",{userId:t,type:n})}const Ka={class:"user-box"},Oa={class:"header-actions"},Ja={class:"search"},Ga={class:"details"},Xa={key:0},Qa={class:"details-item-title"},Za={key:1},en={class:"details-item-title"},tn={key:2},an={class:"details-item-title"},nn={key:3},ln={class:"details-item-title"},sn={key:4},on={class:"details-item-title"},rn={class:"details-item-title"},un={class:"details-item-title"},dn={class:"details-item-title"},cn={class:"details-item-title"},pn={class:"details-item-title"},mn={class:"details-item-title"},fn={class:"details-item-title"},gn={class:"email-row"},vn={class:"type"},bn={key:0,class:"pagination"},hn={class:"dialog-box"},yn={class:"dialog-box"},Cn={class:"container"},wn=Object.assign({name:"user"},{__name:"index",setup(t){const{t:n,locale:d}=qt(),_=aa(),y=Wt(),k=jt(),$=["normal","del"],M=[{text:n("active"),value:"normal"},{text:n("deleted"),value:"del"}],F=f(!1),C=f(230),V=f(40),S=f(null),O=f(!0),j=f(!0),x=f(!0),z=f(!0),J=f(!0),te=f(null),ue=f(!1),ae=f("prev, pager, next,  sizes, total"),u=f(""),o=f(!1),r=f([]),E=f(0),N=f(!0),Y=f(null),H=k.domainList,v=ve({email:"",suffix:k.domainList[0],password:"",type:null}),m=ve({email:"",num:1,size:15,timeSort:0,status:-1});let Z={};const I=ve({password:null,type:-1,userId:0}),ye=f(!1),Ce=f(!1),we=f(!1),Se=f(!1),$e=f(10),de=f(!1),Ee=f(!0),K=ve([]),Ve=f({}),Be=f(0);Ne().then(e=>{K.length=0,K.push(...e)});const Ae=localStorage.getItem("user-params");if(Ae){const e=JSON.parse(Ae);m.num=e.num,m.size=e.size,m.timeSort=e.timeSort,m.status=e.status}oe(()=>m,()=>{localStorage.setItem("user-params",JSON.stringify(m))},{deep:!0}),oe(()=>_.refresh,()=>{Ne().then(e=>{K.length=0,K.push(...e)})}),oe(()=>y.refreshList,()=>{G(!1)}),G();const q=ve({send:["normal","del"],account:["normal","del"],receive:["normal","del"]});function nt(e){e.send&&(q.send=e.send),e.account&&(q.account=e.account),e.receive&&(q.receive=e.receive)}function lt(e){return q.send.length===2?e.sendEmailCount+e.delSendEmailCount:q.send.includes("normal")?e.sendEmailCount:q.send.includes("del")?e.delSendEmailCount:0}function st(e){return q.account.length===2?e.accountCount+e.delAccountCount:q.account.includes("normal")?e.accountCount:q.account.includes("del")?e.delAccountCount:0}function ot(e){return q.receive.length===2?e.receiveEmailCount+e.delReceiveEmailCount:q.receive.includes("normal")?e.receiveEmailCount:q.receive.includes("del")?e.delReceiveEmailCount:0}function it(e){if(e.isDel===1)return n("restore");if(e.status===0)return n("btnBan");if(e.status===1)return n("enable")}const rt=e=>e.row.email;function ut(){o.value=!o.value,Be.value++}const dt=()=>{Ve.value.toggleMenu()};function ct(){v.email="",v.suffix=k.domainList[0],v.type=null,v.password=""}function pt(){ye.value=!0}function mt(){if(!v.email){D({message:n("emptyEmailMsg"),type:"error",plain:!0});return}if(!la(v.email+v.suffix)){D({message:n("notEmailMsg"),type:"error",plain:!0});return}if(!v.password){D({message:n("emptyPwdMsg"),type:"error",plain:!0});return}if(v.password.length<6){D({message:n("pwdLengthMsg"),type:"error",plain:!0});return}if(!v.type){D({message:n("emptyRole"),type:"error",plain:!0});return}Ce.value=!0;const e={...v};e.email=e.email+e.suffix,Wa(e).then(()=>{Ce.value=!1,ye.value=!1,D({message:n("addSuccessMsg"),type:"success",plain:!0}),ct(),G(!1)}).finally(c=>{Ce.value=!1})}function ft(e){if(e.sendAction.sendType==="day")return n("daily");if(e.sendAction.sendType==="count")return n("total");if(e.sendAction.sendType==="ban")return n("sendBanned")}function gt(e){return e.sendAction.hasPerm?e.sendAction.sendCount?e.sendCount+"/"+e.sendAction.sendCount:n("unlimited"):n("unauthorized")}function xe(e){if(e===0)return n("admin");const c=K.findIndex(W=>W.roleId===e);return c>-1?K[c].name:""}function vt(e){ke.confirm(n("reSendConfirm",{msg:e.email}),{confirmButtonText:n("confirm"),cancelButtonText:n("cancel"),type:"warning"}).then(()=>{ja(e.userId).then(()=>{D({message:n("reSuccessMsg"),type:"success",plain:!0}),e.sendCount=0})})}function bt(e){ke.confirm(n("delConfirm",{msg:e.email}),{confirmButtonText:n("confirm"),cancelButtonText:n("cancel"),type:"warning"}).then(()=>{qa(e.userId).then(()=>{D({message:n("delSuccessMsg"),type:"success",plain:!0}),G(!1)})})}function ht(e){const c=f(0);ke.confirm(null,{confirmButtonText:n("confirm"),cancelButtonText:n("cancel"),message:()=>U("div",[U("div",{class:"mb-2"},n("restoreConfirm",{msg:e.email})),U(sa,{modelValue:c.value,"onUpdate:modelValue":W=>c.value=W},[U(He,{label:"option1",value:0},n("normalRestore")),U(He,{label:"option2",value:1},n("allRestore"))])]),type:"warning"}).then(()=>{Ha(e.userId,c.value).then(()=>{e.isDel=0,D({message:n("restoreSuccessMsg"),type:"success",plain:!0})})})}function yt(e){e.status===0?ke.confirm(n("banRestore",{msg:e.email}),{confirmButtonText:n("confirm"),cancelButtonText:n("cancel"),type:"warning"}).then(()=>{De(e)}):De(e)}function De(e){let c=e.status?0:1;Fa({status:c,userId:e.userId}).then(()=>{e.status=c,D({message:n("saveSuccessMsg"),type:"success",plain:!0})})}function Ct(){de.value=!0,Ya({type:I.type,userId:I.userId}).then(()=>{Z.type=I.type,we.value=!1,D({message:n("saveSuccessMsg"),type:"success",plain:!0})}).finally(()=>{de.value=!1})}function Ue(){I.password=null,I.userId=0}function wt(){m.num=1,G()}function St(){if(!I.password){D({message:n("emptyPwdMsg"),type:"error",plain:!0});return}if(I.password.length<6){D({message:n("pwdLengthMsg"),type:"error",plain:!0});return}de.value=!0,Ra({password:I.password,userId:I.userId}).then(()=>{Se.value=!1,D({message:n("saveSuccessMsg"),type:"success",plain:!0})}).finally(()=>{de.value=!1})}function _t(e){Z=e,I.userId=e.userId,I.type=e.type,we.value=!0}function kt(e){I.userId=e.userId,Se.value=!0}function Pt(){m.email="",m.num=1,m.status=-1,m.timeSort=0,G(),Ne().then(e=>{K.length=0,K.push(...e)})}function Le(){m.num=1,m.timeSort=m.timeSort?0:1,G()}function Re(e){m.num=e,G()}function Fe(e){m.size=e,G()}function G(e=!0){Ee.value=e;const c={...m};c.status===-2&&(delete c.status,c.isDel=1),La(c).then(W=>{r.value=W.list,E.value=W.total,Y.value?.setScrollTop(0)}).finally(()=>{Ee.value=!1,setTimeout(()=>{N.value=!1},200)})}window.onresize=()=>{Ye()},Ye();function Ye(){const e=window.innerWidth;z.value=e>1090,x.value=e>1200,j.value=e>650,O.value=e>685,J.value=e>767,C.value=e>480?230:null,S.value=e<480?d.value==="en"?85:75:null,V.value=e<480?25:40,$e.value=e<768?7:11,te.value=e<480?90:null,ae.value=e<768?"pager":"prev, pager, next,sizes, total",ue.value=e<768,u.value=e<380?"small":""}return(e,c)=>{const W=tt,ne=Ze,_e=et,le=Gt,me=ia,X=Qt,fe=ta,zt=ea,$t=Zt,Et=Xt,qe=Ua,Tt=Ot,Te=Kt;return s(),P("div",Ka,[b("div",Oa,[h(l(se),{class:"icon",icon:"ion:add-outline",width:"23",height:"23",onClick:pt}),b("div",Ja,[h(W,{modelValue:m.email,"onUpdate:modelValue":c[0]||(c[0]=a=>m.email=a),class:"search-input",placeholder:e.$t("searchByEmail")},null,8,["modelValue","placeholder"])]),h(_e,{modelValue:m.status,"onUpdate:modelValue":c[1]||(c[1]=a=>m.status=a),placeholder:"Select",class:"status-select",style:je(`width: ${l(d)==="en"?95:80}px`)},{default:p(()=>[(s(),g(ne,{key:-1,label:e.$t("all"),value:-1},null,8,["label"])),(s(),g(ne,{key:0,label:e.$t("active"),value:0},null,8,["label"])),(s(),g(ne,{key:1,label:e.$t("banned"),value:1},null,8,["label"])),(s(),g(ne,{key:-2,label:e.$t("deleted"),value:-2},null,8,["label"]))]),_:1},8,["modelValue","style"]),h(l(se),{class:"icon",icon:"iconoir:search",onClick:wt,width:"20",height:"20"}),m.timeSort===1?(s(),g(l(se),{key:0,class:"icon",onClick:Le,icon:"material-symbols-light:timer-arrow-down-outline",width:"28",height:"28"})):(s(),g(l(se),{key:1,class:"icon",onClick:Le,icon:"material-symbols-light:timer-arrow-up-outline",width:"28",height:"28"})),h(l(se),{class:"icon",icon:"ion:reload",width:"18",height:"18",onClick:Pt}),h(l(se),{class:"icon",icon:"pepicons-pencil:expand",width:"26",height:"26",onClick:ut})]),h(Tt,{ref_key:"scrollbarRef",ref:Y,class:"scrollbar"},{default:p(()=>[b("div",null,[b("div",{class:L(["loading",Ee.value?"loading-show":"loading-hide"]),style:je(N.value?"background: transparent":"")},[h(na)],6),(s(),g(Et,{onFilterChange:nt,"empty-text":N.value?"":null,"default-expand-all":o.value,data:r.value,"preserve-expanded-content":F.value,style:{width:"100%"},key:Be.value},{default:p(()=>[h(X,{width:V.value,type:"expand"},{default:p(a=>[b("div",Ga,[O.value?T("",!0):(s(),P("div",Xa,[b("span",Qa,i(e.$t("tabSent"))+":",1),w(i(a.row.sendEmailCount),1)])),j.value?T("",!0):(s(),P("div",Za,[b("span",en,i(e.$t("tabMailboxes"))+":",1),w(i(a.row.accountCount),1)])),x.value?T("",!0):(s(),P("div",tn,[b("span",an,i(e.$t("tabRegisteredAt"))+":",1),w(i(l(Ie)(a.row.createTime).format("YYYY-MM-DD HH:mm")),1)])),J.value?T("",!0):(s(),P("div",nn,[b("span",ln,i(e.$t("perm"))+":",1),w(" "+i(xe(a.row.type)),1)])),z.value?T("",!0):(s(),P("div",sn,[b("span",on,i(e.$t("tabStatus"))+":",1),a.row.isDel===1?(s(),g(le,{key:0,"disable-transitions":"",type:"info"},{default:p(()=>[w(i(e.$t("deleted")),1)]),_:1})):a.row.status===0?(s(),g(le,{key:1,"disable-transitions":"",type:"primary"},{default:p(()=>[w(i(e.$t("active")),1)]),_:1})):a.row.status===1?(s(),g(le,{key:2,"disable-transitions":"",type:"danger"},{default:p(()=>[w(i(e.$t("banned")),1)]),_:1})):T("",!0)])),b("div",null,[b("span",rn,i(e.$t("registrationIp"))+":",1),w(i(a.row.createIp||e.$t("unknown")),1)]),b("div",null,[b("span",un,i(e.$t("recentIP"))+":",1),w(i(a.row.activeIp||e.$t("unknown")),1)]),b("div",null,[b("span",dn,i(e.$t("recentActivity"))+":",1),w(i(a.row.activeTime?l(Ie)(a.row.activeTime).format("YYYY-MM-DD"):e.$t("unknown")),1)]),b("div",null,[b("span",cn,i(e.$t("loginDevice"))+":",1),w(i(a.row.device||e.$t("unknown")),1)]),b("div",null,[b("span",pn,i(e.$t("loginSystem"))+":",1),w(i(a.row.os||e.$t("unknown")),1)]),b("div",null,[b("span",mn,i(e.$t("browserLogin"))+":",1),w(i(a.row.browser||e.$t("unknown")),1)]),b("div",null,[b("span",fn,i(e.$t("sendEmail"))+":",1),b("span",null,i(gt(a.row)),1),a.row.sendAction.hasPerm?(s(),g(le,{key:0,style:{"margin-left":"10px"}},{default:p(()=>[w(i(ft(a.row)),1)]),_:2},1024)):T("",!0),a.row.sendAction.hasPerm&&a.row.sendAction.sendCount?(s(),g(me,{key:1,size:"small",style:{"margin-left":"10px"},onClick:ge=>vt(a.row),type:"primary"},{default:p(()=>[w(i(e.$t("reset")),1)]),_:2},1032,["onClick"])):T("",!0)])])]),_:1},8,["width"]),h(X,{"show-overflow-tooltip":"","tooltip-formatter":rt,label:e.$t("tabEmailAddress"),"min-width":C.value},{default:p(a=>[b("div",gn,i(a.row.email),1)]),_:1},8,["label","min-width"]),h(X,{formatter:ot,"label-class-name":"receive","column-key":"receive","filtered-value":$,filters:M,width:te.value,label:e.$t("tabReceived"),prop:"receiveEmailCount"},null,8,["width","label"]),O.value?(s(),g(X,{key:0,formatter:lt,"label-class-name":"send","column-key":"send","filtered-value":$,filters:M,label:e.$t("tabSent"),prop:"sendEmailCount"},null,8,["label"])):T("",!0),j.value?(s(),g(X,{key:1,formatter:st,"label-class-name":"account","column-key":"account","filtered-value":$,filters:M,label:e.$t("tabMailboxes"),prop:"accountCount"},null,8,["label"])):T("",!0),x.value?(s(),g(X,{key:2,label:e.$t("tabRegisteredAt"),"min-width":"160",prop:"createTime"},{default:p(a=>[w(i(l(Ie)(a.row.createTime).format("YYYY-MM-DD HH:mm")),1)]),_:1},8,["label"])):T("",!0),z.value?(s(),g(X,{key:3,"min-width":"60px",label:e.$t("tabStatus"),prop:"status"},{default:p(a=>[a.row.isDel===1?(s(),g(le,{key:0,"disable-transitions":"",type:"info"},{default:p(()=>[w(i(e.$t("deleted")),1)]),_:1})):a.row.status===0?(s(),g(le,{key:1,"disable-transitions":"",type:"primary"},{default:p(()=>[w(i(e.$t("active")),1)]),_:1})):a.row.status===1?(s(),g(le,{key:2,"disable-transitions":"",type:"danger"},{default:p(()=>[w(i(e.$t("banned")),1)]),_:1})):T("",!0)]),_:1},8,["label"])):T("",!0),J.value?(s(),g(X,{key:4,label:e.$t("tabRole"),"min-width":"140",prop:"type"},{default:p(a=>[b("div",vn,i(xe(a.row.type)),1)]),_:1},8,["label"])):T("",!0),h(X,{label:e.$t("tabSetting"),width:S.value},{default:p(a=>[h($t,{trigger:"click"},{dropdown:p(()=>[h(zt,null,{default:p(()=>[h(fe,{onClick:ge=>kt(a.row)},{default:p(()=>[w(i(e.$t("chgPwd")),1)]),_:2},1032,["onClick"]),h(fe,{onClick:ge=>_t(a.row)},{default:p(()=>[w(i(e.$t("perm")),1)]),_:2},1032,["onClick"]),a.row.isDel!==1?(s(),g(fe,{key:0,onClick:ge=>yt(a.row)},{default:p(()=>[w(i(it(a.row)),1)]),_:2},1032,["onClick"])):(s(),g(fe,{key:1,onClick:ge=>ht(a.row)},{default:p(()=>[w(i(e.$t("restore")),1)]),_:2},1032,["onClick"])),h(fe,{onClick:ge=>bt(a.row)},{default:p(()=>[w(i(e.$t("delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),default:p(()=>[h(me,{size:"small",type:"primary"},{default:p(()=>[w(i(e.$t("action")),1)]),_:1})]),_:2},1024)]),_:1},8,["label","width"])]),_:1},8,["empty-text","default-expand-all","data","preserve-expanded-content"])),E.value>10?(s(),P("div",bn,[h(qe,{size:u.value,"current-page":m.num,"page-size":m.size,"pager-count":$e.value,"page-sizes":[10,15,20,25,30,50],background:"",layout:ae.value,total:E.value,onSizeChange:Fe,onCurrentChange:Re},null,8,["size","current-page","page-size","pager-count","layout","total"]),ue.value?(s(),g(qe,{key:0,size:u.value,"current-page":m.num,"page-size":m.size,"pager-count":$e.value,"page-sizes":[10,15,20,25,30,50],background:"",layout:"sizes, total",total:E.value,onSizeChange:Fe,onCurrentChange:Re},null,8,["size","current-page","page-size","pager-count","total"])):T("",!0)])):T("",!0)])]),_:1},512),h(Te,{class:"dialog",modelValue:Se.value,"onUpdate:modelValue":c[3]||(c[3]=a=>Se.value=a),title:e.$t("changePassword"),onClosed:Ue},{default:p(()=>[b("div",hn,[h(W,{modelValue:I.password,"onUpdate:modelValue":c[2]||(c[2]=a=>I.password=a),type:"password",placeholder:e.$t("newPassword"),autocomplete:"off"},null,8,["modelValue","placeholder"]),h(me,{class:"btn",type:"primary",loading:de.value,onClick:St},{default:p(()=>[w(i(e.$t("save")),1)]),_:1},8,["loading"])])]),_:1},8,["modelValue","title"]),h(Te,{class:"dialog",modelValue:we.value,"onUpdate:modelValue":c[5]||(c[5]=a=>we.value=a),title:e.$t("changePerm"),onClosed:Ue},{default:p(()=>[b("div",yn,[I.type===0?(s(),g(W,{key:0,disabled:"","model-value":e.$t("admin")},null,8,["model-value"])):(s(),g(_e,{key:1,modelValue:I.type,"onUpdate:modelValue":c[4]||(c[4]=a=>I.type=a),placeholder:"Select"},{default:p(()=>[(s(!0),P(be,null,he(K,a=>(s(),g(ne,{label:a.name,value:a.roleId,key:a.roleId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])),h(me,{disabled:I.type===0,class:"btn",loading:de.value,type:"primary",onClick:Ct},{default:p(()=>[w(i(e.$t("save")),1)]),_:1},8,["disabled","loading"])])]),_:1},8,["modelValue","title"]),h(Te,{modelValue:ye.value,"onUpdate:modelValue":c[10]||(c[10]=a=>ye.value=a),title:e.$t("addUser")},{default:p(()=>[b("div",Cn,[h(W,{modelValue:v.email,"onUpdate:modelValue":c[7]||(c[7]=a=>v.email=a),type:"text",placeholder:e.$t("emailAccount"),autocomplete:"off"},{append:p(()=>[b("div",{onClick:Ht(dt,["stop"])},[h(_e,{ref_key:"mySelect",ref:Ve,modelValue:v.suffix,"onUpdate:modelValue":c[6]||(c[6]=a=>v.suffix=a),placeholder:e.$t("select"),class:"select"},{default:p(()=>[(s(!0),P(be,null,he(l(H),a=>(s(),g(ne,{key:a,label:a,value:a},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),b("div",null,[b("span",null,i(v.suffix),1),h(l(se),{class:"setting-icon",icon:"mingcute:down-small-fill",width:"20",height:"20"})])])]),_:1},8,["modelValue","placeholder"]),h(W,{type:"password",modelValue:v.password,"onUpdate:modelValue":c[8]||(c[8]=a=>v.password=a),placeholder:e.$t("password")},null,8,["modelValue","placeholder"]),h(_e,{modelValue:v.type,"onUpdate:modelValue":c[9]||(c[9]=a=>v.type=a),placeholder:e.$t("perm")},{default:p(()=>[(s(!0),P(be,null,he(K,a=>(s(),g(ne,{label:a.name,value:a.roleId,key:a.roleId},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),h(me,{class:"btn",type:"primary",onClick:mt,loading:Ce.value},{default:p(()=>[w(i(e.$t("add")),1)]),_:1},8,["loading"])])]),_:1},8,["modelValue","title"])])}}}),Jn=oa(wn,[["__scopeId","data-v-b5fd6f17"]]);export{Jn as default};
