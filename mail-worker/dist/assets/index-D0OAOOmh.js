import{X as J,s as d,a2 as j,k as R,a3 as z,c as W,o as k,N as l,z as c,y as C,f,D as X,t as $,g as r,h as F,a0 as G,W as K}from"./index-CrVLGAV5.js";import{E as Q}from"./el-dialog-Dc-uwvKn.js";/* empty css                       *//* empty css                  */import{E as Z}from"./el-date-picker-DJ1UK96n.js";/* empty css                 */import"./el-scrollbar-C5dRdj6E.js";import"./el-popper-CxTMhn_i.js";import{E as x,a as ee}from"./el-select-C7rgYuUX.js";import{s as le,a as ae}from"./star-BM38-Fh-.js";import{e as te}from"./index-CGT8guxN.js";import{u as oe}from"./email-CmInzGUT.js";import{a as se,b as ne,c as re}from"./all-email-CTUE9Nm7.js";import{I as y}from"./iconify-DfAVPzXa.js";import{a as B}from"./day-BmPDsp6A.js";import{_ as ie}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{E as ue}from"./vnode-DMmxwG2F.js";import{E as me}from"./index-Bi5OiBjY.js";import{E as ce}from"./index-BqKRmYx7.js";import"./event-BB_Ol6Sd.js";import"./index-B5LOEhaN.js";import"./dayjs.min-C76mOJ6D.js";import"./index-xJ5jWlCl.js";import"./index-BwIXkj3G.js";import"./index-DXUHX4PR.js";import"./time-utils-C380N-8R.js";import"./position-CDfJS5hk.js";import"./throttle-DgkiUC1P.js";import"./el-empty-CHUpR478.js";import"./el-checkbox-1PyqgUYo.js";import"./index-wlxkN86N.js";const de={class:"email-list-box"},pe={class:"search-type"},fe={class:"clear-email"},ye={class:"clear-button"},he=Object.assign({name:"all-email"},{__name:"index",setup(be){const{t:n}=J(),h=oe(),u=d(""),v=d({}),m=d(""),T=d(),b=d(!1),E=d(!1),_=()=>{T.value.toggleMenu()},e=j({timeSort:0,type:"receive",userEmail:null,accountEmail:null,name:null,subject:null,searchType:"name"}),a=j({subject:"",sendEmail:"",sendName:"",startTime:"",toEmail:"",endTime:"",type:"eq"});function S(){a.subject="",a.sendEmail="",a.sendName="",a.startTime="",a.toEmail="",a.endTime=""}function N(){S(),a.type="eq",a.endTime="",u.value=null}const U=R(()=>{if(e.searchType==="user")return n("user");if(e.searchType==="account")return n("selectEmail");if(e.searchType==="name")return n("sender");if(e.searchType==="subject")return n("subject")}),w=localStorage.getItem("all-email-params");if(w){const t=JSON.parse(w);e.type=t.type,e.timeSort=t.timeSort,e.status=t.status,e.searchType=t.searchType}z(()=>e,()=>{localStorage.setItem("all-email-params",JSON.stringify(e))},{deep:!0});function M(){b.value=!0}function Y(){if(u.value&&(a.startTime=B(u.value[0]).format("YYYY-MM-DD HH:mm:ss"),a.endTime=B(u.value[1]).add(1,"day").format("YYYY-MM-DD HH:mm:ss")),!a.sendEmail&&!a.sendName&&!a.subject&&!a.toEmail&&!u.value){b.value=!1;return}ce.confirm(n("delAllEmailConfirm"),{confirmButtonText:n("confirm"),cancelButtonText:n("cancel"),type:"warning"}).then(()=>{E.value=!0,ne(a).then(()=>{G({message:n("clearSuccess"),type:"success",plain:!0}),S(),v.value.refreshList()}).finally(()=>{E.value=!1})})}function I(){m.value=null,e.timeSort=0,e.type="receive",e.userEmail=null,e.accountEmail=null,e.name=null,e.subject=null,e.searchType="name"}function g(){e.userEmail=null,e.accountEmail=null,e.name=null,e.subject=null,e.searchType==="user"&&(e.userEmail=m.value),e.searchType==="account"&&(e.accountEmail=m.value),e.searchType==="name"&&(e.name=m.value),e.searchType==="subject"&&(e.subject=m.value),v.value.refreshList()}function D(){e.timeSort=e.timeSort?0:1,g()}function L(){g()}function q(t){h.contentData.email=t,h.contentData.delType="physics",h.contentData.showStar=!1,h.contentData.showReply=!1,K.push({name:"content"})}function H(t,o){return re({emailId:t,size:o,...e})}return(t,o)=>{const i=ee,V=x,p=ue,O=Z,P=me,A=Q;return k(),W("div",de,[l(te,{ref_key:"sysEmailScroll",ref:v,"get-emailList":H,"email-delete":r(se),"star-add":r(ae),"star-cancel":r(le),"show-star":!1,"show-user-info":"","show-status":"",actionLeft:"4px","show-account-icon":!1,onJump:q,onRefreshBefore:I,type:"all-email"},{first:c(()=>[l(p,{modelValue:m.value,"onUpdate:modelValue":o[1]||(o[1]=s=>m.value=s),placeholder:t.$t("searchByContent"),class:"search-input"},{prefix:c(()=>[f("div",{onClick:X(_,["stop"])},[l(V,{ref_key:"mySelect",ref:T,modelValue:e.searchType,"onUpdate:modelValue":o[0]||(o[0]=s=>e.searchType=s),placeholder:t.$t("select"),class:"select"},{default:c(()=>[l(i,{key:"3",label:t.$t("sender"),value:"name"},null,8,["label"]),l(i,{key:"4",label:t.$t("subject"),value:"subject"},null,8,["label"]),l(i,{key:"1",label:t.$t("user"),value:"user"},null,8,["label"]),l(i,{key:"2",label:t.$t("selectEmail"),value:"account"},null,8,["label"])]),_:1},8,["modelValue","placeholder"]),f("div",pe,[f("span",null,$(U.value),1),l(r(y),{class:"setting-icon",icon:"mingcute:down-small-fill",width:"20",height:"20"})])])]),_:1},8,["modelValue","placeholder"]),l(V,{modelValue:e.type,"onUpdate:modelValue":o[2]||(o[2]=s=>e.type=s),placeholder:"Select",class:"status-select",onChange:L},{default:c(()=>[l(i,{key:"1",label:t.$t("all"),value:"all"},null,8,["label"]),l(i,{key:"3",label:t.$t("received"),value:"receive"},null,8,["label"]),l(i,{key:"2",label:t.$t("sent"),value:"send"},null,8,["label"]),l(i,{key:"4",label:t.$t("selectDeleted"),value:"delete"},null,8,["label"]),l(i,{key:"4",label:t.$t("noRecipientTitle"),value:"noone"},null,8,["label"])]),_:1},8,["modelValue"]),l(r(y),{class:"icon",icon:"iconoir:search",onClick:g,width:"20",height:"20"}),e.timeSort===0?(k(),C(r(y),{key:0,class:"icon",onClick:D,icon:"material-symbols-light:timer-arrow-down-outline",width:"28",height:"28"})):(k(),C(r(y),{key:1,class:"icon",onClick:D,icon:"material-symbols-light:timer-arrow-up-outline",width:"28",height:"28"})),l(r(y),{class:"icon clear",icon:"fluent:broom-sparkle-16-regular",width:"22",height:"22",onClick:M})]),_:1},8,["email-delete","star-add","star-cancel"]),l(A,{modelValue:b.value,"onUpdate:modelValue":o[9]||(o[9]=s=>b.value=s),title:t.$t("clearEmail"),width:"335",onClosed:N},{default:c(()=>[f("div",fe,[l(p,{modelValue:a.sendName,"onUpdate:modelValue":o[3]||(o[3]=s=>a.sendName=s),placeholder:t.$t("sender")},null,8,["modelValue","placeholder"]),l(p,{modelValue:a.subject,"onUpdate:modelValue":o[4]||(o[4]=s=>a.subject=s),placeholder:t.$t("subject")},null,8,["modelValue","placeholder"]),l(p,{modelValue:a.sendEmail,"onUpdate:modelValue":o[5]||(o[5]=s=>a.sendEmail=s),placeholder:t.$t("sendEmailAddress")},null,8,["modelValue","placeholder"]),l(p,{modelValue:a.toEmail,"onUpdate:modelValue":o[6]||(o[6]=s=>a.toEmail=s),placeholder:t.$t("toEmail")},null,8,["modelValue","placeholder"]),l(O,{"popper-class":"my-date-picker",modelValue:u.value,"onUpdate:modelValue":o[7]||(o[7]=s=>u.value=s),type:"daterange",teleported:!1,"unlink-panels":"","range-separator":r(n)("to"),size:"default"},null,8,["modelValue","range-separator"]),f("div",ye,[l(V,{modelValue:a.type,"onUpdate:modelValue":o[8]||(o[8]=s=>a.type=s),style:{width:"200px"}},{default:c(()=>[l(i,{key:"eq",label:r(n)("equal"),value:"eq"},null,8,["label"]),l(i,{key:"left",label:r(n)("leading"),value:"left"},null,8,["label"]),l(i,{key:"include",label:r(n)("include"),value:"include"},null,8,["label"])]),_:1},8,["modelValue"]),l(P,{loading:E.value,type:"primary",onClick:Y},{default:c(()=>[F($(r(n)("clear")),1)]),_:1},8,["loading"])])])]),_:1},8,["modelValue","title"])])}}}),Ge=ie(he,[["__scopeId","data-v-4af3d3f6"]]);export{Ge as default};
